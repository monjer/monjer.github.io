<!doctype html>




<html class="theme-next muse" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="monjer's note" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="monjer&#39;s note">
<meta property="og:url" content="http://monjer.github.io/page/8/index.html">
<meta property="og:site_name" content="monjer&#39;s note">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="monjer&#39;s note">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: false,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://monjer.github.io/page/8/"/>





  <title>monjer's note</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2b4f08dbd457a5e207bff33f77b0eafc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">monjer's note</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2015/03/17/几种判断对象是否拥有指定属性的方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/03/17/几种判断对象是否拥有指定属性的方法/" itemprop="url">几种判断对象是否拥有指定属性的方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-17T00:00:00+08:00">
                2015-03-17
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/03/17/几种判断对象是否拥有指定属性的方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/17/几种判断对象是否拥有指定属性的方法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有多种方法来检测一个对象是否拥有某个属性。你也许认为调用<code>myObject.hasOwnProperty(&#39;prop&#39;);</code>就简单的解决了这个问题。但，其它几个不同的方式也能完成相同的功能，每种方式有自己的问题和坑。让我们看下这几种检测属性存在的方法，困扰js开发者的概念，原型链的查找和问题。</p>
<h3 id="双感叹号-属性查找"><a href="#双感叹号-属性查找" class="headerlink" title="双感叹号!!属性查找"></a>双感叹号<code>!!</code>属性查找</h3><p>我们可能已经见过<code>!!</code>的用法，如Modernizr中的特性检测，怪异的<code>!!</code>时不时的出现在我们面前。在我们开始介绍之前，我们需要注意的是，<code>!!</code>实际上不是检测一个对象是否拥有某个属性的，它是用来检测对象属性的值的。也就是说，如果属性值是false或者对象属性根本不存在，使用<code>!!</code>会得到<strong>falsy</strong>结果。在不知道它的用法和局限的情况下使用，会产生很糟糕的结果。</p>
<h3 id="的意思"><a href="#的意思" class="headerlink" title="!!的意思"></a><code>!!</code>的意思</h3><p><code>!!</code>是一种将值转换为<code>Boolean</code>值的简单方法。真值(truthy)会转换为<code>Boolean</code>的<code>true</code>值。一些其它诸如<code>undefined</code>或<code>null</code>,二者都是falsy值，<code>!!</code>会将它们转换为布尔值的<code>false</code>。此处的关键是<code>!!</code>转换的是值。再次强调一遍，转换的是值。这与对象的结构和大小无关。<code>!!</code>只是将truthy和falsy值转换为布尔值。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>空数组是一个truthy值，如：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = []; <span class="comment">// []</span></div></pre></td></tr></table></figure></p>
<p>如果要将它转换为布尔值呢？它是truthy值，所以我们应该得到<code>true</code>:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = !![]; <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p><code>null</code>是一个falsy值，如
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="literal">null</span>; <span class="comment">// null</span></div></pre></td></tr></table></figure></p>
<p>预期的结果应该<code>false</code>    :
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = !!<span class="literal">null</span>; <span class="comment">// false</span></div></pre></td></tr></table></figure></p>
<p>这意味着我们可以使用它来查询我们的对象！
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">  <span class="attr">cool</span>: <span class="literal">false</span></div><div class="line">&#125;;</div><div class="line">!!toddObject.name <span class="comment">// true (correct result as it's a truthy value)</span></div></pre></td></tr></table></figure></p>
<p>这种方法也会查找对象的原型链(<code>prototype</code>)来判断属性是否存在，如果查询属性的名称与原型对象的属性重名，就会导致意外的负面影响。
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Object.prototype.toString</span></div><div class="line">!!toddObject.toString <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// !!Array.prototype.forEach</span></div><div class="line">!![][<span class="string">'forEach'</span>] <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<h3 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h3><p>记住我们可以使用<code>!!</code>来检测我们的对象。我们通常会如下新建对象和默认值：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">    <span class="attr">favouriteDrink</span>: <span class="literal">null</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>使用<code>!!</code>来检查对象属性是否存在，是一个愚蠢的想法：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">    <span class="attr">favouriteDrink</span>: <span class="literal">null</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">if</span> (!!toddObject.favouriteDrink) &#123; <span class="comment">// false</span></div><div class="line">  <span class="comment">// do something if it exists, I think...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这种方式显得幼稚不堪！以上代码（对于新的程序员或不懂<code>!!</code>用法的程序员来说）会说“如果<strong>toddObject.favouriteDrink</strong>存在，那就执行以下代码”。但不是这样的，因为<code>!!</code>(我再次强调一遍)是用来对值进行强制类型转换，这里的值是<code>null</code>，也是falsy的，尽管该属性存在。在这种情况下使用<code>!!</code>检测对象属性是否存在是一种不好的方法，因为已存在属性的初始值可以是falsy类型的。</p>
<h3 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a>hasOwnProperty</h3><p>它是一个本地方法，我们从开始就能使用它，但是出于几个原因它也不是百分之百可信的。让我们细细说来。</p>
<h3 id="它的意思"><a href="#它的意思" class="headerlink" title="它的意思"></a>它的意思</h3><p>使用<code>myObject.hasOwnProperty(&#39;prop&#39;)</code>是直接访问对象属性的好方法，它不会检查对象的原型链。不错吧，对于某些特殊使用情况它尤其好用。<code>hasOwnProperty</code>会为我们返回布尔值，来判断对象属性是否存在。</p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">    <span class="attr">favouriteDrink</span>: <span class="literal">null</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">if</span> (toddObject.hasOwnProperty(<span class="string">'favouriteDrink'</span>)) &#123; <span class="comment">// true</span></div><div class="line">  <span class="comment">// do something if it exists, fo sho</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>但不要对这种实现方式抱确信无疑的态度，继续往下读来获取最佳实践方法。</p>
<h3 id="坑-1"><a href="#坑-1" class="headerlink" title="坑"></a>坑</h3><p>IE完全的把<code>hasOwnProperty</code>方法搞乱了，在<code>host</code>(宿主对象)上使用它会比较痛苦（宿主对象没有<code>hasOwnProperty</code>方法）。</p>
<p>JavaScript本身也没有保护该方法的名称，事实上我们可以如下写代码
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">hasOwnProperty</span>: <span class="string">'hello...'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这使得我们很难完全放心使用<code>hasOwnProperty</code>。然而我们可以直接拿到<code>Object.prototype</code>对象的<code>hasOwnProperty</code>方法，来保证任何<code>hasOwnProperty</code>的调用都是正确的。</p>
<p>如下：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">    <span class="attr">favouriteDrink</span>: <span class="literal">null</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(toddObject, <span class="string">'favouriteDrink'</span>)) &#123; <span class="comment">// true</span></div><div class="line">  <span class="comment">// do something if it exists, fo sho sho!</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>.call()</code>可以改变<code>hasOwnProperty</code>方法的上下文(在IE下可以这么干)，并保证我们拿到的就是<code>Object.prototype</code>原型对象上的<code>hasOwnProperty</code>方法，这是这里的秘密所在。</p>
<p>显然你可能已经将它封转在一个辅助函数，节省时间以避免每次都要写<code>prototype</code>:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasProp</span> (<span class="params">obj, prop</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop);</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (hasProp(toddObject, <span class="string">'favouriteDrink'</span>)) &#123;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="‘prop’-in-myObject"><a href="#‘prop’-in-myObject" class="headerlink" title="‘prop’ in myObject"></a>‘prop’ in myObject</h3><p><code>in</code>操作符没有<code>hasOwnProperty</code>方法使用广泛，但读过本文后，它也是值得一用的。它也会返回一个布尔值，很像<code>!!myObject</code>,但它不会计算值，它会计算属性是否存在！也就是说如果属性值是<code>false</code>，我们仍旧可以正确的知道这个属性确实是存在的。
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toddObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Todd'</span>,</div><div class="line">    <span class="attr">favouriteDrink</span>: <span class="literal">null</span>,</div><div class="line">    <span class="attr">cool</span>: <span class="literal">false</span></div><div class="line">&#125;;</div><div class="line"><span class="string">'cool'</span> <span class="keyword">in</span> toddObject; <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p><code>in</code>操作符显然也是用来检测对象属性是否存在的比较好的方法，用法简洁明了。</p>
<h3 id="坑-2"><a href="#坑-2" class="headerlink" title="坑"></a>坑</h3><p><code>in</code>操作符也会检测<code>prototype</code>(原型链对象),这会导致不想要的负面效果
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// inherits Object.prototype.toString</span></div><div class="line"><span class="string">'toString'</span> <span class="keyword">in</span> toddObject; <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p>但是我们应该知道这些原型对象的属性名称，避免命名冲突。</p>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h3><p>我们也可以使用<code>typeof</code>。</p>
<h3 id="意思"><a href="#意思" class="headerlink" title="意思"></a>意思</h3><p>标准的<code>typeof</code>操作符返回一个<code>String</code>类型的值（不太可信任的），我们可以拿结果值与其它一些字符串进行比较，如<code>!== &#39;undefined&#39;</code>，以示属性是否存在。
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> toddObject.name !== <span class="string">'undefined'</span>) &#123;</div><div class="line"><span class="comment">// do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>看起来有点丑陋，而且写法较长，尤其是当我们使用它同时进行多次比较。Also, null would fall under this check unless using != ‘undefined’ (single =) as null == undefined anyway.(此外，<code>null</code>在这种检测下会失败，除非使用<code>!= &#39;undefined&#39;</code>(一个<code>=</code>)，因为<code>null == undefined</code>恒成立。<strong>注</strong>:此句描述不妥)</p>
<h3 id="坑-3"><a href="#坑-3" class="headerlink" title="坑"></a>坑</h3><p>只有了解它，才能使用它，因为对于标准的类型检测，此方法不太可信。</p>
<h3 id="特性检测"><a href="#特性检测" class="headerlink" title="特性检测"></a>特性检测</h3><p>我不确定确切的说法，但之前确有人告诉我一些浏览器中的实现会以falsy值来表示一个不存在的属性（虽然我不确定，但此处也值得一提）…因此<code>in</code>操作符最适合进行特性检测：</p>
<pre><code>// just an example, not the one somebody mentioned...
if (&apos;draggable&apos; in document.createElement(&apos;div&apos;)) {
  // do something if prop exists
}
</code></pre><h3 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h3><p><a href="http://toddmotto.com/methods-to-determine-if-an-object-has-a-given-property/" target="_blank" rel="external">Methods to determine if an Object has a given property</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty" target="_blank" rel="external">MDN Object.prototype.hasOwnProperty()</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" target="_blank" rel="external">MDN in Operator</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in" target="_blank" rel="external">MDN for…in</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank" rel="external">Equality comparisons and when to use them</a></li>
<li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html" target="_blank" rel="external">Draft ECMA-262 6th Edition </a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2015/03/16/改变文档选择高亮部分的样式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/03/16/改变文档选择高亮部分的样式/" itemprop="url">改变文档选择高亮部分的样式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-16T00:00:00+08:00">
                2015-03-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/03/16/改变文档选择高亮部分的样式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/16/改变文档选择高亮部分的样式/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在一个页面中，用户在可以用鼠标来选择页面中的某个部分，通常情况下是选择文字，被选中的部分会以高亮状态来表示选中。例如文档中包含以下文档片段
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"m-box"</span>&gt;</span>这是HTML页面文档中的文字描述内容，此处省略一千行...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>以下是Chrome下部分文字的选中状态，高亮部分是被选择的文本。</p>
<img src="/2015/03/16/改变文档选择高亮部分的样式/1.png" alt="1.png" title="">
<p>CSS中可以使用<code>::selection</code><strong>伪元素</strong>来设置选中部分的样式，如
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-pseudo">::selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对应的效果如下,</p>
<img src="/2015/03/16/改变文档选择高亮部分的样式/2.png" alt="2.png" title="">
<p>当然在页面中添加以上CSS后，该页面的所有文本的高亮状态都会改变，也可以指定文档部分区域使用该样式，如
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.m-box</span><span class="selector-pseudo">::selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这是一个在CSS3中虽被提及却最终被废弃的选择器，但CSS4中又重新加入了该<a href="3">选择器</a>。</p>
<h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><p>并不是所有的浏览器都实现了该选择器，IE6,IE7,IE8是不支持该选择器，但<a href="https://msdn.microsoft.com/zh-cn/library/ie/jj127349" target="_blank" rel="external">IE9+</a>则实现了该选择器；火狐需要添加<code>-moz-</code>前缀。Chrome,Safari,Opera都支持该选择器，所以兼容性的写法如下
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 设置全局文本选择样式 */</span></div><div class="line"> <span class="selector-pseudo">::selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-pseudo">::-moz-selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* 设置.m-box下文本选择样式 */</span></div><div class="line"><span class="selector-class">.m-box</span><span class="selector-pseudo">::selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.m-box</span><span class="selector-pseudo">::-moz-selection</span>&#123;</div><div class="line">    <span class="attribute">background-color</span>: <span class="number">#00BBD5</span>;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>对于Webkit内核下的<code>::-webkit-selection</code>的写法暂时未找到明确的初出。</p>
</blockquote>
<h3 id="有限的样式"><a href="#有限的样式" class="headerlink" title="有限的样式"></a>有限的样式</h3><p>不是所有的CSS样式都能在<code>::selection</code>选择器下使用，以下属性可以在该选择器下使用</p>
<ul>
<li><code>color</code></li>
<li><code>background-color</code></li>
<li><code>cursor</code></li>
<li><code>outline</code></li>
<li><code>text-decoration</code></li>
<li><code>text-emphasis-color</code></li>
<li><code>text-shadow</code></li>
</ul>
<p>此外需要注意的是<code>background-image</code>属性不能用于该选择器;只有Chrome,Safari和Firefox17+支持<code>text-shadow</code>样式。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::selection" target="_blank" rel="external">MDN <code>::selection</code></a></li>
<li><a href="https://msdn.microsoft.com/zh-cn/library/ie/jj127349" target="_blank" rel="external">MSDN <code>::selection</code> pseudo-element</a></li>
<li><a href="http://dev.w3.org/csswg/css-pseudo-4/#selectordef-selection" target="_blank" rel="external">W3C <code>::selection</code></a></li>
<li><a href="http://quirksmode.org/css/selectors/selection.html" target="_blank" rel="external">selection styles</a></li>
<li><a href="http://stackoverflow.com/questions/7545550/has-the-webkit-selection-selector-ever-been-supported" target="_blank" rel="external">Has the ::-webkit-selection selector ever been supported?</a></li>
<li><a href="http://toddmotto.com/overriding-the-default-text-selection-colour/" target="_blank" rel="external">Overriding the Default Text Selection Colour</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2015/03/10/使用HTML5-Data-Arrtibutes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/03/10/使用HTML5-Data-Arrtibutes/" itemprop="url">使用HTML5 Data Arrtibutes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-10T00:00:00+08:00">
                2015-03-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/03/10/使用HTML5-Data-Arrtibutes/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/10/使用HTML5-Data-Arrtibutes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>退回到XHTML/HTML4的日子，当存储任意关联DOM的数据时，开发者选择甚少。你可以创建自定义属性，但这有一定的风险；你的代码可能是无效的，浏览器可能会忽略数据，并且如果属性名称之前已成为标准的HTML属性，那么也会引起问题。</p>
<p>因此，大多开发者依赖于<code>class</code>或者<code>rel</code>属性来存放数据，因为它们是唯一的允许设置任意合理的字符串的属性。例如，假设我们创建了一个显示诸如Twitter时间线的插件。理想状态下，在不改变代码的基础上，该插件的JavaScript代码应该是可配置的——所以我们在<code>class</code>属性上定义了用户的ID，如：
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"msglist"</span> <span class="attr">class</span>=<span class="string">"user_bob"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>我们的JavaScript代码能够查找到ID值为<strong>msglist</strong>的元素。通过简单的字符串解析，便可以找到一个以<strong>user_</strong>开头的class名称，假设”bob”是这个ID，之后就可以显示所有来自该用户的消息。</p>
<p>然后，比如说我们想定义一个消息的最大显示数量，忽略六个月(180天)之前的消息：
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"msglist"</span> <span class="attr">class</span>=<span class="string">"user_bob list-size_5 maxage_180"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>可见，我们的<code>class</code>属性已经变得越来越笨重不堪；这更易引发错误，JavaScript的解析代码也会愈加复杂。</p>
<h3 id="HTML5-data-Attributes"><a href="#HTML5-data-Attributes" class="headerlink" title="HTML5 data Attributes"></a>HTML5 data Attributes</h3><p>幸运的是，HTML5引入了一个自定义的数据属性。你可以使用以<code>data-</code>为前缀的任意小写字母组合的名称，来存放数据：
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"msglist"</span> <span class="attr">data-user</span>=<span class="string">"bob"</span> <span class="attr">data-list-size</span>=<span class="string">"5"</span> <span class="attr">data-maxage</span>=<span class="string">"180"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>自定义数据属性是：</p>
<ul>
<li>字符串 —— 你可以存放任何可以转换为字符串的数据，如JSON。类型转换需要在JavaScript代码中完成。</li>
<li>应该在没有合适的HTML5元素或属性的情况下使用它。</li>
<li>对于页面来说是私有的。Unlike microformats, they should be ignored by external systems such as search engine indexing bots.</li>
</ul>
<h3 id="JavaScript解析-1-getAttribute和setAttribute"><a href="#JavaScript解析-1-getAttribute和setAttribute" class="headerlink" title="JavaScript解析#1:getAttribute和setAttribute"></a>JavaScript解析#1:<strong>getAttribute</strong>和<strong>setAttribute</strong></h3><p>所有浏览器都允许你使用<strong>getAttribute</strong>和<strong>setAttribute</strong>方法来获取或者修改<code>data-</code>属性，如：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msglist = <span class="built_in">document</span>.getElementById(<span class="string">"msglist"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> show = msglist.getAttribute(<span class="string">"data-list-size"</span>);</div><div class="line">msglist.setAttribute(<span class="string">"data-list-size"</span>, +show+<span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<p>这也能正常执行，但仅用来兼容旧的浏览器。</p>
<h3 id="JavaScript解析-2-jQuery的data-方法"><a href="#JavaScript解析-2-jQuery的data-方法" class="headerlink" title="JavaScript解析#2 jQuery的data()方法"></a>JavaScript解析#2 jQuery的<code>data()</code>方法</h3><p>从<strong>1.4.3</strong>版本开始，jQuery的<code>data()</code>方法可以解析HTML5的data属性。你<strong style="color:red">无需指明</strong><code>data-</code>前缀，所以等价代码可以如下书写：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msglist = $(<span class="string">"#msglist"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> show = msglist.data(<span class="string">"list-size"</span>);</div><div class="line">msglist.data(<span class="string">"list-size"</span>, show+<span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<p>然而，要注意的是jQuery会巧妙的将取得的数据转换为合适的类型(booelans,numbers,objects,arrays或null)，并避免操作DOM。不像<code>setAttribute</code>，<code>data()</code>方法不会改变<code>data-list-size</code>属性，如果你在jQuery之外检查它的值，得到的仍是<code>5</code>。</p>
<h3 id="JavaScript解析-3-dataset-API"><a href="#JavaScript解析-3-dataset-API" class="headerlink" title="JavaScript解析#3 dataset API"></a>JavaScript解析#3 dataset API</h3><p>最后，我们使用HTML5的dataset API来解析数据，它会返回一个<code>DOMStringMap</code>对象。你可能已发现data-attribute的名字会做一个映射，丢掉<code>data-</code>前缀，丢掉连字符并转换为驼峰样式，如：</p>
<table summary="dataset API name conversion" style="width:auto;margin:1em auto">
<tbody><tr>
<th>attribute name</th>
<th>dataset API name</th>
</tr>
<tr>
<td>data-user</td>
<td>user</td>
</tr>
<tr>
<td>data-maxage</td>
<td>maxage</td>
</tr>
<tr>
<td>data-list-size</td>
<td>listSize</td>
</tr>
</tbody></table>

<p>我们的新代码如下：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> msglist = <span class="built_in">document</span>.getElementById(<span class="string">"msglist"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> show = msglist.dataset.listSize;</div><div class="line">msglist.dataset.listSize = +show+<span class="number">3</span>;</div></pre></td></tr></table></figure></p>
<p>除了IE10及其低版本外，所有现代浏览器都支持datalist API。此外也有一个兼容性的<a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills#dataset-property-for-use-with-custom-data--attributes" target="_blank" rel="external">工具</a>来解决该问题，但在实践中，如果你要兼容旧的浏览器，使用jQuery会加实用。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://api.jquery.com/data/" target="_blank" rel="external">jQuery.data()</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset" target="_blank" rel="external">MDN Element dataset</a></li>
<li><a href="http://jsfiddle.net/DaJun/xm3uhq7t/1/" target="_blank" rel="external">jsFiddle code</a></li>
</ul>
<h3 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h3><ul>
<li><a href="http://www.sitepoint.com/use-html5-data-attributes/" target="_blank" rel="external">How to Use HTML5 Data Attributes</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/12/18/IOS-development-Technical-Q-A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/18/IOS-development-Technical-Q-A/" itemprop="url">IOS development Technical Q&A</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-18T00:00:00+08:00">
                2014-12-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/12/18/IOS-development-Technical-Q-A/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/12/18/IOS-development-Technical-Q-A/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="私有数据存储Technical-Q-amp-A-QA1699"><a href="#私有数据存储Technical-Q-amp-A-QA1699" class="headerlink" title="私有数据存储Technical Q&amp;A QA1699"></a>私有数据存储<em style="font-size:12px;float:right"><a href="https://developer.apple.com/library/ios/qa/qa1699/_index.html" target="_blank" rel="external">Technical Q&amp;A QA1699</a></em></h3><p><span style="color:#E74C3C"><em>Q:</em></span>我的app支持文件共享，但是一些私有数据我不想让用户访问。我该在哪里存储这些私有数据？</p>
<p><span style="color:#E74C3C"><em>A:</em></span>从IOS3.2开始，通过在<em>Info.plist</em>中添加<em>UIFileSharingEnabled</em>关键字，应用程序可以允许用户向app中的文档目录添加文件。设置这个关键字后，<em>&lt; Application Home &gt;/Documents </em>目录下的内容可以在iTunes中自由访问，用户可以任意添加
或删除文件。添加<em>UIFileSharingEnabled</em>关键字并且需要维护用户私有数据的应用，需要将私有数据存储在别的目录下。</p>
<p>除了以上指出的目录外，整个<em>&lt; Application Home &gt;/Library </em>目录在更新和备份时，一直会被保存下来，除了<em>&lt; Application Home &gt;/Library/Caches </em>目录。因此，应用程序可以在<em>&lt; Application Home &gt;/Library </em>目录下创建自己的目录，在更新和备份期间，这些目录也会被保存下来。为了降低命名冲突的风险，我们建议你小心命名
你的目录。如，将一个目录命名为<em>Private Documents </em>会比较好。</p>
<p>与用户共享文件，更多信息，参见<a href="https://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/CoreServicesLayer/CoreServicesLayer.html" target="_blank" rel="external">Sharing Files With the User</a>。</p>
<p>有关如何备份和更新，更多信息，参见<a href="http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/RuntimeEnvironment/RuntimeEnvironment.html" target="_blank" rel="external">Backup and Restore</a>。</p>
<hr>
<h3 id="向一个超出父视图边界的视图派发事件Technical-Q-amp-A-QA1812"><a href="#向一个超出父视图边界的视图派发事件Technical-Q-amp-A-QA1812" class="headerlink" title="向一个超出父视图边界的视图派发事件Technical Q&amp;A QA1812"></a>向一个超出父视图边界的视图派发事件<em style="font-size:12px;float:right"><a href="https://developer.apple.com/library/ios/qa/qa2013/qa1812.html" target="_blank" rel="external">Technical Q&amp;A QA1812</a></em></h3><p><span style="color:#E74C3C"><em>Q:</em></span>我的view在屏幕上显示正确，但是无法接受touch事件.为什么？</p>
<p><span style="color:#E74C3C"><em>A:</em></span>该问题的常见起因是你的view定位在它父view边界之外。在应用接受到一个touch事件时，会发起一个<em>
hit-tesing</em>过程，来决定哪个view来接受事件。这个过程起始于view层次结构的根，通常是指应用的window，并从前向后的顺序查找subviews，直到找到位于touch下面的最上层的view。这个view会成为hit-test
view ，并接受touch事件。每个参与该流程的view首先会检测事件是否发生在自己的边界内。只有检测成功后，这个view才会进一步将事件交由其subviews来继续进行hit-test检测。所以如果你的view在touch下面，但其自身
定位超出其父view的边界，父view无法检测到事件位置，也不会将touch事件传递给你的view。</p>
<p>解决办法之一是改变view层次结构的布局，以便你的view定位在其父view边界之内。如果因某些原因导致必须保持当前布局，你也可以通过改变其父view的hit-testing行为，以避免父view会忽略touch事件。可以通过
覆盖父view的<code>-(UIView *)hitTest:withEvent:</code>方法来达到该效果,如下:</p>
<p>覆盖父view类的hit-tesing方法
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UIView</span> *)hitTest:(<span class="built_in">CGPoint</span>)point withEvent:(<span class="built_in">UIEvent</span> *)event &#123;</div><div class="line"></div><div class="line">    <span class="comment">// Convert the point to the target view's coordinate system.</span></div><div class="line">    <span class="comment">// The target view isn't necessarily the immediate subview</span></div><div class="line">    <span class="built_in">CGPoint</span> pointForTargetView = [<span class="keyword">self</span>.targetView convertPoint:point fromView:<span class="keyword">self</span>];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">CGRectContainsPoint</span>(<span class="keyword">self</span>.targetView.bounds, pointForTargetView)) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// The target view may have its view hierarchy,</span></div><div class="line">        <span class="comment">// so call its hitTest method to return the right hit-test view</span></div><div class="line">        <span class="keyword">return</span> [<span class="keyword">self</span>.targetView hitTest:pointForTargetView withEvent:event];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">super</span> hitTest:point withEvent:event];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>关于hit-testing的更多信息，请参考<em> Event Handling Guide for iOS</em>中关于<a href="http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html" target="_blank" rel="external">Event Delivery</a>的讨论。</p>
<p>其它可能导致该问题的原因包括：</p>
<ul>
<li>view或其任何父view的<code>userInteractionEnabled</code>属性设置为了<code>NO</code>。</li>
<li>application对象调用了<code>beginIgnoringInteractionEvents</code>方法，但没有调用<code>endIgnoringInteractionEvents</code>方法。</li>
</ul>
<p>为了维持view的可交互性，你要确保<code>userInteractionEnabled</code>属性设置为了<code>YES</code>,并且确保application不会忽略用户事件。</p>
<p>如果你得view在动画期间没有收到touch事件，那是因为<code>UIView</code>的动画方法常常在动画执行期间禁用掉了touch事件。在执行<code>UIView</code>的动画时，配置<code>UIViewAnimationOptionAllowUserInteraction</code>选项，可以允许view在动画执行期间接受touch事件。</p>
<hr>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/12/15/支持IOS多版本的一些简单策略/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/15/支持IOS多版本的一些简单策略/" itemprop="url">支持IOS多版本的一些简单策略</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-15T00:00:00+08:00">
                2014-12-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/12/15/支持IOS多版本的一些简单策略/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/12/15/支持IOS多版本的一些简单策略/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>每次IOS版本的升级都会造成在一定的时间内新老版本IOS共存的问题，因为不同的用户在选择是否要及时更新设备的IOS版本的问题上，对待的方式不同。有的用户会在发布新版的IOS版本后及时作出更新，
但有的用户则会维持当前状态。新的IOS版本发布后，会带来更多新的功能特性，同时也会造成一些已有API的变动。如，IOS8发布之后一个比较明显的变动便是废除了上大家一直以来用来响应设备旋转的三个方法：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)willRotateToInterfaceOrientation:(<span class="built_in">UIInterfaceOrientation</span>)toInterfaceOrientation</div><div class="line">                            duration:(<span class="built_in">NSTimeInterval</span>)duration</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)willAnimateRotationToInterfaceOrientation:(<span class="built_in">UIInterfaceOrientation</span>)interfaceOrientation</div><div class="line">                                         duration:(<span class="built_in">NSTimeInterval</span>)duration</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)didRotateFromInterfaceOrientation:(<span class="built_in">UIInterfaceOrientation</span>)fromInterfaceOrientation</div></pre></td></tr></table></figure></p>
<p>因为IOS中引入了<strong>size class</strong>的概念来统一IOS的界面开发，并推荐使用结合<strong>auto layout</strong>来进行界面的布局，所以换之添加了以下实现自<code>UIContentContainer</code>协议的
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewWillTransitionToSize:(<span class="built_in">CGSize</span>)size</div><div class="line">       withTransitionCoordinator:(<span class="keyword">id</span>&lt;<span class="built_in">UIViewControllerTransitionCoordinator</span>&gt;)coordinator</div></pre></td></tr></table></figure></p>
<p>方法，来响应界面调整可能会造成的变动：</p>
<blockquote>
<p>Use <code>viewWillTransitionToSize:withTransitionCoordinator:</code> to make interface-based adjustments.</p>
</blockquote>
<p>在IOS8和低于IOS8版本共存这个时间段内，如果我们的App要发布新的版本，可能需要调整我们代码的实现形式，选择使用新的特性，同时要向前兼容已有的老版本的IOS，来更加完善我们的App的功能，同时也不影响那些设备装有旧版
IOS用户的基本功能。针对<strong>代码层面上</strong>来说，基本的思路是程序运行时，在代码实现上进行代码逻辑的切换，实现切换的判断条件大概有两种：</p>
<ul>
<li>IOS版本检测</li>
<li>IOS特性检测</li>
</ul>
<h3 id="IOS版本检测"><a href="#IOS版本检测" class="headerlink" title="IOS版本检测"></a>IOS版本检测</h3><p><code>Fundation framework</code>的<code>NSObjeCRuntime.h</code>文件中包含了所有已发布系统的版本号，同时使用<code>NSFoundationVersionNumber</code>宏来保存当前App运行系统的版本
对于IOS设备来说，该头文件中的宏定义如下
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#if TARGET_OS_IPHONE</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_2_0	678.24</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_2_1  678.26</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_2_2  678.29</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_3_0  678.47</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_3_1  678.51</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iPhoneOS_3_2  678.60</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_4_0  751.32</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_4_1  751.37</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_4_2  751.49</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_4_3  751.49</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_5_0  881.00</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_5_1  890.10</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_6_0  992.00</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_6_1  993.00</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_7_0 1047.20</span></div><div class="line"><span class="meta">#define NSFoundationVersionNumber_iOS_7_1 1047.25</span></div><div class="line"><span class="meta">#endif</span></div></pre></td></tr></table></figure></p>
<p>所以检测设备是否是IOS8及以上版本的系统，如下
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// IOS8 system version</span></div><div class="line"><span class="keyword">if</span>(<span class="built_in">NSFoundationVersionNumber</span> &gt; <span class="built_in">NSFoundationVersionNumber_iOS_7_1</span>)&#123;</div><div class="line">    <span class="comment">// to do for IOS8</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对应的检测IOS7版本，如下
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="built_in">NSFoundationVersionNumber</span> &gt; <span class="built_in">NSFoundationVersionNumber_iOS_6_1</span> &amp;&amp; <span class="built_in">NSFoundationVersionNumbe</span> &lt;= <span class="built_in">NSFoundationVersionNumber_iOS_7_1</span>)&#123;</div><div class="line">    <span class="comment">// to do for IOS7</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果要针对某一个特定的IOS版本进行处理(通常情况下是要处理特定版本下的IOS系统本身的bug)，可以直接在条件语句里判断版本号
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="built_in">NSFoundationVersionNumber</span> == <span class="built_in">NSFoundationVersionNumber_iOS_7_1</span>)&#123;</div><div class="line">    <span class="comment">// to do for ios7.1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>依次类推。这样根据不同的系统版本来切换代码逻辑，实现在特定IOS的版本下完成匹配的功能，同时不影响其它IOS版本上的代码实现，保证个版本的代码独立性和完成性。</p>
<h3 id="IOS特性检测"><a href="#IOS特性检测" class="headerlink" title="IOS特性检测"></a>IOS特性检测</h3><p>支持最新版IOS的App，经常会用到新的类型或新的接口，执行特性检测可以避免程序运行期的崩溃问题。例如IOS8发布后，推荐使用<code>UIAlertController</code>来
替换原来早期的<code>UIActionSheet</code>和<code>UIAlertView</code>,这样如果我们的App发布在IOS8时，可以使用使用<code>UIAlertController</code>,可以执行以下逻辑判断
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>([<span class="built_in">UIAlertController</span> <span class="keyword">class</span>])&#123;</div><div class="line">    <span class="comment">// to do use UIAlertController</span></div><div class="line"></div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="comment">// to do use UIAlertView or UIActionSheet</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>判断一个方法是否可用的话，可以使用<code>NSObject</code>的<code>- (BOOL)respondsToSelector:(SEL)aSelector</code>方法或者使用<code>+ (BOOL)instancesRespondToSelector:(SEL)aSelector</code>类方法
如：IOS7之后的UITableView默认会给每个单元格添加一个底部分割线(seperatorLine)，分割线距左侧顶边<code>15</code>个点，某些情况下我们需要将该分割线顶边，IOS7下，我们只要设置
<code>tableView.separatorInset = UIEdgeInsetsZero ;</code>但IOS8之后<code>UIView</code>添加了<code>layoutMargins</code>属性来定义视图与子视图的顶边。所以兼容IOS8来移除分割线的顶边，需要添加添加条件
判断
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayCell:(<span class="built_in">UITableViewCell</span> *)cell</div><div class="line">forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> ([tableView respondsToSelector:<span class="keyword">@selector</span>(setLayoutMargins:)]) &#123;</div><div class="line">        [tableView setLayoutMargins:<span class="built_in">UIEdgeInsetsZero</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ([cell respondsToSelector:<span class="keyword">@selector</span>(setLayoutMargins:)]) &#123;</div><div class="line">        [cell setLayoutMargins:<span class="built_in">UIEdgeInsetsZero</span>];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>基于C语言的函数，可以通过比较函数名称与NULL值，可以判断函数是否存在
<blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="built_in">UIAccessibilityIsVoiceOverRunning</span> != <span class="literal">NULL</span> &amp;&amp; <span class="built_in">UIAccessibilityIsVoiceOverRunning</span>())&#123;</div><div class="line"></div><div class="line">    <span class="comment">// VoiceOver is running</span></div><div class="line">&#125;</div><div class="line">     </div></pre></td></tr></table></figure></blockquote></p>
</blockquote>
<p>以上，完。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html#//apple_ref/doc/uid/TP40007072-CH5-SW24" target="_blank" rel="external">Supporting Multiple Versions of iOS</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html#//apple_ref/doc/uid/10000163-BCICHGIE" target="_blank" rel="external">SDK Compatibility Guide</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/12/07/User-Defined-Runtime-Attributes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/07/User-Defined-Runtime-Attributes/" itemprop="url">User Defined Runtime Attributes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-07T00:00:00+08:00">
                2014-12-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/12/07/User-Defined-Runtime-Attributes/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/12/07/User-Defined-Runtime-Attributes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>User defined runtime attributes是Xcode的Interface Builder工具中一直以来被忽视的最佳特性。
自Xcode4和IOS5以来，通过该特性可以配置视图的一些属性，而它们是无法在Interface Buidler中设置的。</p>
<p>作为一个关注解耦的倡导者，我相信我们应该尽可能多的在Interface Builder中完成配置。尽管runtime attributes特性常常被
忽视，但是它们更加能保证视图控制器的代码的整洁性，这是我们最想要的。</p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>User defined runtime attributes 可以在Interface builder工具集中的 <em>Identity Inspector</em> 标签中进行设置，如下图所示：</p>
<img src="/2014/12/07/User-Defined-Runtime-Attributes/user-defined-runtime-attributes-300x282.png" alt="user-defined-runtime-attributes-300x282.png" title="">
<p>它们被定义成为一个key path/value的集合，在每个给定的key paths上，视图必须满足key value Coding规则。</p>
<h3 id="属性类型"><a href="#属性类型" class="headerlink" title="属性类型"></a>属性类型</h3><p>以下是一个可选属性(attribute)类型列表，和对应的属性(property)类型</p>
<p>Boolean – <code>BOOL</code></p>
<p>Number – <code>NSNumber *</code>或任意数字类型, 如， <code>NSInteger</code></p>
<p>String – <code>NSString *</code></p>
<p>Point – <code>CGPoint</code></p>
<p>Size – <code>CGSize</code></p>
<p>Rect – <code>CGRect</code></p>
<p>Range – <code>NSRange</code></p>
<p>Color – <code>UIColor *</code></p>
<p>以及以下一些特殊类型：</p>
<p>Nil - 该类型不会为属性设置实际值，仅仅是规定属性(property)应该设置为nil</p>
<p>Localized String - 这里的值是一个键值(key),用来查询当前区域设置下的字符串，其对应的属性(property)会设置为对应的本地化字符串。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>在Interface builder的 <em>Attributes Inspector</em> 面板中是无法配置一个view所包含的CALayer对象的。但是通过使用
run time attributes，我们可以很方便的设置给定视图的边框(border)和圆角(rounded corners),只要设置<code>layer.borderWidth</code>
和<code>layer.cornerRadius</code>的key paths就可以了，如下图所示:</p>

<p>配置一个自定义控件已经成为小菜一碟的事儿了!例如，如果你创建了你自己的范围滑块（像UISlider，但拥有两个滑块儿来指定一个范围的最大值和最小值），
并将其添加到Interface builder中的一个视图上，那么你可以如下对其进行配置，来避免因添加不必要的配置代码而污染了视图控制器。</p>
<img src="/2014/12/07/User-Defined-Runtime-Attributes/custom-control-setup1-300x106.png" alt="custom-control-setup1-300x106.png" title="">
<h3 id="转换自其它类型"><a href="#转换自其它类型" class="headerlink" title="转换自其它类型"></a>转换自其它类型</h3><p>任何属性类型(attribute type)都可以用来配置其它类型的属性(property),只要类型是以同一种方式表示的。例如 <em>Point</em> 和 <em>Size</em> 可以互换使用，但他们也可以用来代表<code>CGVector</code>
类型的属性(property),因为它们底层结构是一致的（例如，都是由两个浮点数组成）。</p>
<p>但是你可以通过使用其它的小窍门来设置Interface builder中不支持的属性(property)类型。例如继续配置视图对象所包含的
CALayer对象，你可能希望设置边框颜色和阴影颜色。这无法通过runtime attributes来直接进行设置，因为这些属性(properties)是
<code>CGColorRef</code>类型。但尝试以下示例：</p>
<img src="/2014/12/07/User-Defined-Runtime-Attributes/calayer-border-color-300x105.png" alt="calayer-border-color-300x105.png" title="">
<p>为了让CALayer的<code>borderColorFromUIColor</code>属性满足KVC-compliant，只要实现该属性的setter方法即可。这可是通过在CALayer的分类中
实现，如下
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CALayer</span> (<span class="title">Additions</span>)</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setBorderColorFromUIColor:(<span class="built_in">UIColor</span> *)color</div><div class="line">&#123;</div><div class="line">  <span class="keyword">self</span>.borderColor = color.CGColor;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="转换自字符串"><a href="#转换自字符串" class="headerlink" title="转换自字符串"></a>转换自字符串</h3><p>通常将字符串转换为其它类型是很有用的。例如，runtime attributes无法直接支持配置<code>UIEdgeInsets</code>类型的属性，但考虑以下的分类：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIScrollView</span> (<span class="title">Additions</span>)</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setContentInsetFromString:(<span class="built_in">NSString</span> *)contentInsetString</div><div class="line">&#123;</div><div class="line">  <span class="keyword">self</span>.contentInset = <span class="built_in">UIEdgeInsetsFromString</span>(contentInsetString);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>将一个字符串转换为<code>UIEdgeInsets</code>类型显得尤其简单，因为UIKit提供了<code>UIEdgeInsetsFromString</code>这一棒极了的方法。但是你可以定义你
自己的方法，将字符串转换为其它你可以想到的任何类型。尽情发挥创意吧！</p>
<h3 id="更加高级的用法"><a href="#更加高级的用法" class="headerlink" title="更加高级的用法"></a>更加高级的用法</h3><p>通常情况下，能够设置视图上的属性(atteibute)，而这些属性(attribute)在视图上没有对应的属性(property)，是非常有用的。</p>
<p>想象一个场景，你的视图控制器包含多个UIView类型的视图对象。你希望使用UIKit Dynamics来设置每个视图对象跌落到屏幕底部并弹起。但
你想在Interface builder中定义它们弹跳的高度，因为毕竟你是在构建界面！</p>
<p>考虑以下在一个UIView对象上设置runtime attribute。</p>
<img src="/2014/12/07/User-Defined-Runtime-Attributes/elasticity-300x125.png" alt="elasticity-300x125.png" title="">
<p>对于<code>elasticity</code>key path，UIView无法满足KVC-compliant。现在运行app会引发一个异常。但你可以在UIView上为<code>elasticity</code>属性定义一个分类
来改变这一现状（参见:<a href="http://ios-blog.co.uk/tutorials/cleaner-properties-implementation-in-categories/" target="_blank" rel="external">category properties</a>）。</p>
<p>在你的视图控制器上配置了UIDynamicItemBehavior后，现在你可以使用这个属性了。这棒极了，因为这意味着你不必在你的视图控制上为每个单独的
视图对象添加逻辑代码。你的视图控制器只需要知道视图的集合(如，IBOutletCollection)。每个视图对象的这个特殊的配置可以在其所属的Interface builder
中完成。
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="built_in">UILabel</span> *label <span class="keyword">in</span> <span class="keyword">self</span>.labels) &#123;</div><div class="line"></div><div class="line">  <span class="built_in">UIDynamicItemBehavior</span> *itemBehavior = [[<span class="built_in">UIDynamicItemBehavior</span> alloc] initWithItems:@[label]];</div><div class="line"></div><div class="line">  [<span class="keyword">self</span>.animator addBehavior:itemBehavior];</div><div class="line"></div><div class="line">  itemBehavior.elasticity = label.elasticity;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>我想这是正确配置用户界面的方法。鉴于我们使用了Interface builder，我们应该挖掘它的潜力加以利用。但是…这总有一个”但是”,不是吗？</p>
<p>多数人不会查看Interface builder中的user defined runtime attributes面板，所以如果他们之后来维护你的代码时，会感到困惑不堪。
他们会花费数小时尝试搞清楚为什么一个视图有边框，并采取在视图控制器中覆盖视图对象来移除边框。</p>
<p>所以像任何类似性质的情况一样 —— 我是指使用一种编程语言或开发环境的更加高级的用法 —— 我们应该加以小心。只有在必要时或者可以简化编码逻辑时使用。</p>
<p>在视图控制中设置视图对象也没那么凌乱。使用user-defined runtime attributes属性的最合理的原因是要在iPhone或iPad下对Interface buidler进行
不同的配置。因为每个设备下你都已有特定的nib或storyboard文件了，这些地方需要针对设备进行特殊配置。</p>
<p>runtime attributes还有其它诸多用法。我期待倾听其它你能想到的富有创造力的示例，我希望深入的探讨其优略，所以请不吝评论。</p>
<p><a href="http://ios-blog.co.uk/tutorials/user-defined-runtime-attributes/" target="_blank" rel="external">原文链接</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="http://spin.atomicobject.com/2014/05/30/xcode-runtime-attributes/" target="_blank" rel="external">Expanding User-Defined Runtime Attributes in Xcode with Objective-C</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/11/25/MySQL的外键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/25/MySQL的外键/" itemprop="url">MySQL的外键</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-25T00:00:00+08:00">
                2014-11-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/11/25/MySQL的外键/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/11/25/MySQL的外键/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>MySQL中默认的MyISAM引擎以及其它引擎下建立的表不支持外键，只有InnoDB支持外键，引入外键能够保证数据的一致性，级联的更新和删除操作减轻了应用程序的负担，避免了为保证数据完整性所要添加的程序代码，而且外键也有助于理清数据库中表之间的关系。</p>
<p>但，外键为开发带来的好处是以牺牲服务器性能为代价的，为了保证数据的一致性，在主表数据发生删除和更新，都要查询关联表来检查两边的关联数据是否一致，这种查询检测也会带来额外的开销，影响服务器的性能。相比之下，不支持外键的MyISAM引擎在插入和删除数据时则提供了极佳的性能。所以某些应用程序为了避免外键带来的性能影响，而选择在程序代码中保证数据的一致性。</p>
<p>现在以<code>user(id,name)</code>和<code>blog(id,title,uid)</code>这两个表为例，简单记录下MySQL的外键操作。</p>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>在创建表时，添加外键
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table user(</div><div class="line">    id int auto_increment,</div><div class="line">    name varchar(100),</div><div class="line">    primary key(id)</div><div class="line">)engine=InnoDB;</div><div class="line"></div><div class="line">mysql&gt; create table blog(</div><div class="line">    id int auto_increment,</div><div class="line">    title varchar(100),</div><div class="line">    uid int,</div><div class="line">    primary key(id),</div><div class="line">    index(uid),</div><div class="line">    constraint u_fk foreign key(uid) references user (id)</div><div class="line">        on delete cascade</div><div class="line">        on update cascade</div><div class="line">)engine=InnoDB;</div></pre></td></tr></table></figure></p>
<h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><p><strong>1.</strong>使用<code>show create table</code>语句,如
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show create table blog;</div></pre></td></tr></table></figure></p>
<p>显示结果中包含的创建表的完整语句:
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `blog` (</div><div class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</div><div class="line">  `title` varchar(100) DEFAULT NULL,</div><div class="line">  `uid` int(11) DEFAULT NULL,</div><div class="line">  PRIMARY KEY (`id`),</div><div class="line">  KEY `uid` (`uid`),</div><div class="line">  CONSTRAINT `u_fk` FOREIGN KEY (`uid`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE</div><div class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1</div></pre></td></tr></table></figure></p>
<p><strong>2.</strong>查看<code>information_schema.key_column_usage</code>表。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">select</div><div class="line">    concat(table_name, <span class="string">'.'</span>, column_name) as <span class="string">'foreign key'</span>,</div><div class="line">    concat(referenced_table_name, <span class="string">'.'</span>, referenced_column_name) as <span class="string">'referenced key'</span></div><div class="line">from</div><div class="line">    information_schema.key_column_usage</div><div class="line"><span class="built_in">where</span></div><div class="line">    referenced_table_name is not null and table_schema=<span class="string">'test'</span>;</div></pre></td></tr></table></figure></p>
<p>该语句会将数据库中所有的表的外键关联关系输出，如：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select</div><div class="line">    -&gt;     concat(table_name, <span class="string">'.'</span>, column_name) as <span class="string">'foreign key'</span>,</div><div class="line">    -&gt;     concat(referenced_table_name, <span class="string">'.'</span>, referenced_column_name) as <span class="string">'referenced key'</span></div><div class="line">    -&gt; from</div><div class="line">    -&gt;     information_schema.key_column_usage</div><div class="line">    -&gt; <span class="built_in">where</span></div><div class="line">    -&gt;     referenced_table_name is not null;</div><div class="line">+---------------------------+----------------+</div><div class="line">| foreign key               | referenced key |</div><div class="line">+---------------------------+----------------+</div><div class="line">| ThirdPartyUser.molaUserId | MolaUser.id    |</div><div class="line">| blog.uid                  | user.id        |</div><div class="line">+---------------------------+----------------+</div><div class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.18 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p>也可以在<code>where</code>子句中添加<code>table_schema=&#39;db_name&#39;</code>条件来指定查看指定数据库中表的外键信息，如
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select</div><div class="line">    -&gt;     concat(table_name, <span class="string">'.'</span>, column_name) as <span class="string">'foreign key'</span>,</div><div class="line">    -&gt;     concat(referenced_table_name, <span class="string">'.'</span>, referenced_column_name) as <span class="string">'referenced key'</span></div><div class="line">    -&gt; from</div><div class="line">    -&gt;     information_schema.key_column_usage</div><div class="line">    -&gt; <span class="built_in">where</span></div><div class="line">    -&gt;     referenced_table_name is not null and table_schema=<span class="string">'test'</span>;</div><div class="line">+-------------+----------------+</div><div class="line">| foreign key | referenced key |</div><div class="line">+-------------+----------------+</div><div class="line">| blog.uid    | user.id        |</div><div class="line">+-------------+----------------+</div><div class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>查看<code>information_schema.key_column_usage</code>表的结构，如下</p>
<pre><code>   mysql&gt; describe information_schema.key_column_usage;
 +-------------------------------+--------------+------+-----+---------+-------+
 | Field                         | Type         | Null | Key | Default | Extra |
 +-------------------------------+--------------+------+-----+---------+-------+
 | CONSTRAINT_CATALOG            | varchar(512) | NO   |     |         |       |
 | CONSTRAINT_SCHEMA             | varchar(64)  | NO   |     |         |       |
 | CONSTRAINT_NAME               | varchar(64)  | NO   |     |         |       |
 | TABLE_CATALOG                 | varchar(512) | NO   |     |         |       |
 | TABLE_SCHEMA                  | varchar(64)  | NO   |     |         |       |
 | TABLE_NAME                    | varchar(64)  | NO   |     |         |       |
 | COLUMN_NAME                   | varchar(64)  | NO   |     |         |       |
 | ORDINAL_POSITION              | bigint(10)   | NO   |     | 0       |       |
 | POSITION_IN_UNIQUE_CONSTRAINT | bigint(10)   | YES  |     | NULL    |       |
 | REFERENCED_TABLE_SCHEMA       | varchar(64)  | YES  |     | NULL    |       |
 | REFERENCED_TABLE_NAME         | varchar(64)  | YES  |     | NULL    |       |
 | REFERENCED_COLUMN_NAME        | varchar(64)  | YES  |     | NULL    |       |
 +-------------------------------+--------------+------+-----+---------+-------+
 12 rows in set (0.21 sec)

mysql&gt;
</code></pre></blockquote>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>使用语句<code>alter table tbl_name drop foreign key fk_symbol;</code>,如删除blog的外键
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table <span class="string">'blog'</span> drop foreign key <span class="string">'u_fk'</span>;</div><div class="line">Query OK, 0 rows affected (0.61 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p>再次查看blog的创建语句，如
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show create table blog;</div></pre></td></tr></table></figure></p>
<p>显示结果中包含的创建表的语句
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> CREATE TABLE `blog` (</div><div class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</div><div class="line">  `title` varchar(100) DEFAULT NULL,</div><div class="line">  `uid` int(11) DEFAULT NULL,</div><div class="line">  PRIMARY KEY (`id`),</div><div class="line">  KEY `uid` (`uid`)</div><div class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1</div></pre></td></tr></table></figure></p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>由于已有外键关联不能直接更新，需所以要更新外键关系，实际上是要删除原有的外键关联，然后在为表添加新的外键，删除外键的操作可以参照以上使用<code>alter table tbl_name drop foreign key fk_symbol;</code>语句，之后在用<code>add constraint</code>添加外键，如</p>
<p>第一步删除:
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table blog drop foreign key u_fk;</div><div class="line">Query OK, 0 rows affected (0.61 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p>第二步新建：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table blog add constraint u_fk foreign key (uid) references user (id) on delete cascade on update cascade;</div><div class="line">Query OK, 0 rows affected (0.68 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p>再次查看blog表的创建语句
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show create table blog;</div></pre></td></tr></table></figure></p>
<p>显示结果
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE `blog` (</div><div class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</div><div class="line">  `title` varchar(100) DEFAULT NULL,</div><div class="line">  `uid` int(11) DEFAULT NULL,</div><div class="line">  PRIMARY KEY (`id`),</div><div class="line">  KEY `uid` (`uid`),</div><div class="line">  CONSTRAINT `u_fk` FOREIGN KEY (`uid`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE</div><div class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1</div></pre></td></tr></table></figure></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="1">Using FOREIGN KEY Constraints</a></li>
<li><a href="2">CREATE TABLE Syntax</a></li>
<li><a href="3">InnoDB and FOREIGN KEY Constraints</a></li>
<li><a href="4">How to change the foreign key referential action? (behavior)</a></li>
<li><a href="5">List foreign keys in mysql</a></li>
</ul>
<blockquote>
<p>定义外键满足的几个基本条件</p>
<ul>
<li>主表(parent)和引用表(child)的存储引擎必须一致，并且都不能为临时表。</li>
<li>foreign keys和reference keys的数据类型要一致，数字类型的大小和类型一致，字符类型的长度一致。</li>
<li>需要在foreign keys和reference keys上建立索引。</li>
<li>InnoDB允许使用一个或多个列的外键引用。</li>
<li>给出的<code>CONSTRAINT symbol</code>在数据库中必须唯一。</li>
</ul>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/10/19/安装及使用Cocoapods管理工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/10/19/安装及使用Cocoapods管理工具/" itemprop="url">安装及使用Cocoapods管理工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-10-19T00:00:00+08:00">
                2014-10-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/10/19/安装及使用Cocoapods管理工具/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/19/安装及使用Cocoapods管理工具/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Cocoapods的概念"><a href="#Cocoapods的概念" class="headerlink" title="Cocoapods的概念"></a>Cocoapods的概念</h3><p><a href="http://cocoapods.org/" target="_blank" rel="external">Cocoapods</a>是Objective-C工程的第三方库的依赖管理工具，目前已经有许多Objective-C的第三方开源库可以通过Cocoapods来安装并导入到工程内。当项目工程过多依赖第三方库时，原始的做法是需要将第三方开源库的代码手工下载到本地，之后再import进我们的Xcode工程，有时还需要根据开源库所依赖的Objective-C的语言版本和语言规则，以及编译器的版本来进行代码级别的编译选项的配置。最常见的是在一个ARC工程中，使用一个非ARC的老的第三方开源库时，我们首先要导入其代码到我们的Xcode中后，之后需要逐条将每个oc文件在编译选项中进行设置。而且当多个第三方库导入后，也会增加我们项目工程的目录管理结构的复杂性。与此同时，一个第三方开源库总是在进行各种bug的修复以功能的完善，之后会有更多新的版本不断更新和对外发布，如果以依赖代码的形式来使用第三方库的话，那么当需要更新第三方库时，将会是一件十分痛苦的事情，我们需要重新替换文件，并重复各种配置。因此Cocoapods管理工具的出现就是为了解决这些问题。</p>
<p>Cocoapods是基于ruby构建，Mac OS X系统下默认已经安装好了ruby的运行时，<strong>gem</strong>是ruby的开发工具包的一个标准，Cocoapods相当于一个ruby的开发工具包，当前存在一个流行的ruby开发包的托管服务工具叫做<a href="http://rubygems.org/" target="_blank" rel="external">RubyGems</a>，可以用其来托管和安装各种存在的ruby的开发工具包，当然也可以用来安装Cocoapods。默认高版本的ruby(1.9版本以后)下已经内建安装了<a href="http://rubygems.org/" target="_blank" rel="external">RubyGems</a>，因此我们可以直接使用。</p>
<h3 id="安装Cocoapods"><a href="#安装Cocoapods" class="headerlink" title="安装Cocoapods"></a>安装Cocoapods</h3><p>安装Cocoapods，只要打开命令行工具，输入并运行以下命令即可
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo gem install cocoapods</div><div class="line">$ sudo pod setup</div></pre></td></tr></table></figure></p>
<p>第一行命令的作用是使用<a href="2">RubyGems</a>来安装Cocoapods管理工具，运行成功后，Cocoapods即安装到了你的本地机器上。</p>
<p>第二行命令的作用是在你的当前用户主目录下，创建名为<code>~/.cocoapods/repos</code>的隐藏目录，并将<code>https://github.com/CocoaPods/Specs</code>链接指向所有 <code>public master spec-repo</code>clone到本地，用来存储所有<strong>spec-repos</strong>的版本配置。<strong>spec</strong>的全称是<strong>Specification</strong>，一个<strong>Specification</strong>文件的扩展名为<code>.podspec.json</code>,描述了Cocoapods托管的Pod库的某一个版本，包括了其代码的存放位置，要用到的配置，以及其它常用的元信息，如，<em>名称</em>，<em>版本号</em>以及<em>简介</em>。以名为<a href="https://github.com/CocoaPods/Specs/blob/master/Specs/A2DynamicDelegate/1.0.1/A2DynamicDelegate.podspec.json" target="_blank" rel="external"><strong>A2DynamicDelegate</strong></a>的<em>1.0.1</em>版本的<strong>Specification</strong>配置文件为例来说，其内容如下</p>
<pre><code>{
    &quot;name&quot;: &quot;A2DynamicDelegate&quot;,
    &quot;version&quot;: &quot;1.0.1&quot;,
    &quot;license&quot;: &quot;BSD&quot;,
    &quot;summary&quot;: &quot;Blocks are to functions as A2DynamicDelegate is to delegates.&quot;,
    &quot;homepage&quot;: &quot;https://github.com/pandamonia/A2DynamicDelegate&quot;,
    &quot;authors&quot;: {
    &quot;Alexsander Akers&quot;: &quot;a2@pandamonia.us&quot;,
    &quot;Zachary Waldowski&quot;: &quot;zwaldowski@gmail.com&quot;
    },
    &quot;source&quot;: {
    &quot;git&quot;: &quot;https://github.com/pandamonia/A2DynamicDelegate.git&quot;,
    &quot;tag&quot;: &quot;v1.0.1&quot;
    },
    &quot;source_files&quot;: [
    &quot;A2DynamicDelegate.{h,m}&quot;,
    &quot;A2BlockDelegate.{h,m}&quot;
    ],
    &quot;requires_arc&quot;: false
    }
</code></pre><p>更多关于<strong>Specification</strong>的介绍，参见<a href="http://guides.cocoapods.org/syntax/podspec.html#group_root_specification" target="_blank" rel="external">Podspec Syntax Reference</a>.</p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/1.png" alt="1.png" title="">
<h3 id="使用Cocoapods"><a href="#使用Cocoapods" class="headerlink" title="使用Cocoapods"></a>使用Cocoapods</h3><p>Cocoapods依赖于一个名为<code>Podfile</code>的配置文件来管理我们Xcode工程所依赖的第三方库。更多关于<code>Podfile</code>文件的参数以及配置格式说明，参见官网<a href="http://guides.cocoapods.org/syntax/podfile.html#podfile" target="_blank" rel="external">描述</a>。现在以名为<code>PlainPro</code>的空白工程为例，说明如何使用Cocoapods来安装并管理第三方库。</p>
<ol>
<li><p>使用Xcode新建PlainPro工程</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/4.png" alt="4.png" title="">
</li>
<li><p>打开<code>PlainPro</code>的根目录，在根目录中新建<code>Podfile</code>的空文件,这里我使用sublime text来新建文件</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/2.png" alt="2.png" title="">
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/3.png" alt="3.png" title="">
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/5.png" alt="5.png" title="">
</li>
<li><p>打开命令行工具，使用<code>cd</code>命令切换到<code>PlainPro</code>项目的根目录</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/6.png" alt="6.png" title="">
</li>
<li><p>在当前目录下运行以下命令,开始添加Cocoapods管理</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod install</div></pre></td></tr></table></figure>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/7.png" alt="7.png" title="">
<p> 安装成功后，命令行工具显示如下</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/8.png" alt="8.png" title="">
<p> 成功安装后PlainPro的目录如下</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/9.png" alt="9.png" title="">
<p> 目录下会安装新的文件和目录，之后需要使用<code>PlainPro.xcworkspace</code>来再次打开我们的工程</p>
 <img src="/2014/10/19/安装及使用Cocoapods管理工具/10.png" alt="10.png" title="">
<p> 在Xcode中打开<code>Podfile</code>文件，这样就可以在该文件中添加我们当前<code>PlainPro</code>工程所依赖的第三方开源库依赖配置信息。</p>
</li>
</ol>
<h3 id="安装AFNetworking"><a href="#安装AFNetworking" class="headerlink" title="安装AFNetworking"></a>安装AFNetworking</h3><p>以安装当前流行的<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="external">AFNetworking</a>框架为例，简单说明Cocoapods的依赖管理的使用。</p>
<p>在Xcode中，打开<code>Podfile</code>文件，在文件中添加以下配置,并保存</p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/11.png" alt="11.png" title="">
<p>重新回到之前的命令行工具，并再次运行<code>pod install</code>命令
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod install</div></pre></td></tr></table></figure></p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/12.png" alt="12.png" title="">
<p>这样AFNetworking即已经安装成功，在我们的代码中便可使用该框架提供的功能。</p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/13.png" alt="13.png" title="">
<p>以后类似的第三方库的添加过程参见AFnetworking的安装步骤即可。可以在<a href="http://cocoapods.org/" target="_blank" rel="external">Cocoapods</a>的首页搜索框中来查看其支持的开源库。</p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/14.png" alt="14.png" title="">
<p>或者，在命令行工具下，使用<code>pod search</code>命令来搜索并查看是否支持第三方库，如</p>
<img src="/2014/10/19/安装及使用Cocoapods管理工具/15.png" alt="15.png" title="">
<p>以上。</p>
<h3 id="更新Cocoapods"><a href="#更新Cocoapods" class="headerlink" title="更新Cocoapods"></a>更新Cocoapods</h3><h3 id="卸载Cocoapods"><a href="#卸载Cocoapods" class="headerlink" title="卸载Cocoapods"></a>卸载Cocoapods</h3><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://cocoapods.org/" target="_blank" rel="external">CocoaPods</a></li>
<li><a href="http://guides.cocoapods.org/using/getting-started.html#toc_3" target="_blank" rel="external">Install CocoaPods on your computer</a></li>
<li><a href="http://guides.cocoapods.org/using/using-cocoapods.html" target="_blank" rel="external">Adding Pods to an Xcode project</a></li>
<li><a href="http://guides.cocoapods.org/syntax/podfile.html#podfile" target="_blank" rel="external">Podfile</a></li>
<li><a href="http://guides.cocoapods.org/terminal/commands.html" target="_blank" rel="external">Cocoapods Command-line Reference</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/ruby.1.html" target="_blank" rel="external">Ruby Programmers Reference Guide</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/gem.1.html#//apple_ref/doc/man/1/gem" target="_blank" rel="external">BSD General Commands Manual</a></li>
<li><a href="http://rubygems.org/pages/about" target="_blank" rel="external">About RubyGems</a></li>
<li><a href="http://stackoverflow.com/questions/25313033/where-is-ruby-stored-on-mac" target="_blank" rel="external">Where is ruby stored on mac?</a></li>
<li><a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="external">AFNetworking</a></li>
<li><a href="http://guides.rubygems.org/" target="_blank" rel="external">RubyGems Guides</a></li>
<li><a href="http://guides.cocoapods.org/syntax/podspec.html#group_root_specification" target="_blank" rel="external">Podspec Syntax Reference</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/10/11/Objective-C编码规范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/10/11/Objective-C编码规范/" itemprop="url">Objective-C编码规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-10-11T12:55:08+08:00">
                2014-10-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/10/11/Objective-C编码规范/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/10/11/Objective-C编码规范/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>文件命名</li>
<li>文件说明</li>
<li>文件目录</li>
<li>#import与#include</li>
<li>空格及代码格式化</li>
<li>类(class)命名</li>
<li>分类(categories)命名</li>
<li>属性(property)命名</li>
<li>方法(method)命名</li>
<li>变量(variable)命名</li>
<li>点符号(dot-notation)用法</li>
<li>注释(comment)</li>
<li>单例</li>
<li>块(Blocks)</li>
<li>图片命名</li>
<li>Prefix.pch文件</li>
<li>CGGeometry函数</li>
<li>使用#pragma mark -</li>
<li>私有属性&amp;&amp;私有方法</li>
<li>对象字面量(Literals)</li>
<li>属性(Properties)和实例变量(Instance Variables)</li>
<li>删除自动生成的代码模板</li>
</ul>
<h3 id="文件命名"><a href="#文件命名" class="headerlink" title="文件命名"></a>文件命名</h3><p>文件名称应该反映其所包含类的名称及类的作用，在Objective-C中通常要在文件名称的开始处中添加由两个大写字母组成的前缀，以代表当前文件所属的工程。如：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MMRootViewController.h	</div><div class="line">MMRootViewController.m</div></pre></td></tr></table></figure></p>
<p>定义Objective-C的一个控制类<code>MMRootViewController</code>，其中<code>MM</code>代表公司MolaMola的首字母缩写，<code>RootViewController</code>表明该类是Application的根对象,是全局控制器的顶层类。</p>
<h3 id="文件说明"><a href="#文件说明" class="headerlink" title="文件说明"></a>文件说明</h3><p>由于是多人协作共同完成一个工程，根据模块的划分，每个人都要创建和维护属于自己任务范围内的类，在Objective-C中几乎每个属于MVC范围的类都对应着一个头文件<code>.h</code>和源文件<code>.m</code>文件。因此我们需要在文件中为该文件添加必要的说明性内容，便于划清职责和后期代码维护。默认情况下Xcode会以注释的形式，在文件的启起始位置为新建的文件添加默认的说明，如<code>MMRootViewController.h</code>的文件说明：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  MMRootViewController.h</span></div><div class="line"><span class="comment">//  MolaSyncPro</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//  Created by manjun.han on 30/04/2013.</span></div><div class="line"><span class="comment">//  Copyright (c) 2013 molasync. All rights reserved.</span></div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure></p>
<p>在以上的文件说明中，分别指明了</p>
<ul>
<li><strong>文件名称</strong>:<code>MMRootViewController.h</code></li>
<li><strong>类名</strong>:<code>MMRootViewController</code></li>
<li><strong>文件前缀</strong>:<code>MM</code></li>
<li><strong>所属工程名称</strong>:<code>MolaSyncPro</code></li>
<li><strong>文件创建者</strong>:<code>manjun.han</code></li>
<li><strong>文件创建日期</strong>:<code>30/04/2013</code></li>
<li><strong>文件所有公司名称:</strong>:<code>molasync</code></li>
</ul>
<p>以上几项基本上能说明一个文件的基本信息，请在创建文件时，按照此格式来添加自己的文件说明。</p>
<h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><p>IOS开发中我们会以Xcode作为首选IDE开发我们的工程，基于工程架构考虑，为了更清晰的管理我们工程中的类，通常我们都会将一个较大的工程以模块的形式进行划分，通常不同的模块会被分类到不同目录下。默认情况下Xcode中是以<strong>组(Group)</strong>的形式来将模块归类，但所有模块中的文件都会保存在项目的根目录下，当工程规模变大时，我们在批量管理莫某块下的类时，如，集体移动，复制等操作，物理上会变得难于管理。因此要求我们在Xcode中新建的每个<strong>组(Group)</strong>都要对应文件系统中的一个<strong>同层级同名</strong>的目录。如在MolaSyncPro中：</p>
<p>组：</p>
<p><code>ViewController</code>–&gt; <code>SliderPanel</code>，</p>
<p>在工程的磁盘根目录下会有对应的磁盘目录：</p>
<p><code>ViewController</code>–&gt; <code>SliderPanel</code>。</p>
<h3 id="import与-include"><a href="#import与-include" class="headerlink" title="#import与#include"></a>#import与#include</h3><p>根据被包含的头文件的语言类型来决定使用<code>#import</code>或<code>#include</code>:</p>
<ul>
<li>包含Objective-C或Objective-C++头文件时，使用<code>#import</code></li>
<li>包含C或C++头文件时，使用<code>#include</code></li>
</ul>
<p><code>#import</code>保证头文件不会被重复包含多次。</p>
<h3 id="缩进及代码格式化"><a href="#缩进及代码格式化" class="headerlink" title="缩进及代码格式化"></a>缩进及代码格式化</h3><ul>
<li><p><strong>缩进</strong></p>
<p>  以4个空格为单位进行代码缩进，可以使用tabs进行代码缩进，但需要在Xcode的偏好设置中将tabs的间距设置为4个空格的长度。</p>
</li>
<li><p><strong>方法声明和定义*</strong></p>
<p>  在<code>-</code>或者<code>+</code>与返回值声明之间需要添加一个空格的留白，<code>:</code>与<code>参数类型</code>之间不加空白，<code>参数</code>与<code>参数</code>声明之间添加一个空格的留白,方法定义中的大括号要单独成行，如方法声明：</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath ;</div></pre></td></tr></table></figure>
<p>  方法定义：</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath </div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  参数过多时，每个参数声明需要单独成行，如：</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)mailComposeController:(MFMailComposeViewController *)controller</div><div class="line">          didFinishWithResult:(MFMailComposeResult)result</div><div class="line">                        error:(<span class="built_in">NSError</span> *)error</div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  或</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)<span class="keyword">short</span>:(GTMFoo *)theFoo</div><div class="line">          longKeyword:(<span class="built_in">NSRect</span>)theRect</div><div class="line">    evenLongerKeyword:(<span class="keyword">float</span>)theInterval</div><div class="line">                error:(<span class="built_in">NSError</span> **)theError </div><div class="line">&#123;</div><div class="line">  <span class="comment">// todo</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>方法调用</strong></p>
<p>  方法调用的格式与方法定义格式类似，短参数列表可以写在同一代码行，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="keyword">super</span> touchesBegan:touches withEvent:event] ;</div></pre></td></tr></table></figure>
<p>  长参数列表需要将每个参数单个成行，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[GAIDictionaryBuilder createEventWithCategory:GAIShareTrackerManager.SyncInviteActionType</div><div class="line">									 action:GAIShareTrackerManager.ButtonPressAction</div><div class="line">										label:GAIShareTrackerManager.inviteByEmail</div><div class="line">										value:<span class="literal">nil</span>];</div></pre></td></tr></table></figure>
<p>  要注意的是尽量将每个单行参数中的<code>:</code>对齐。</p>
</li>
<li><p><strong>语句块</strong></p>
<p>  任何情况下都要在条件语句中保留大括号，起始大括号<code>{</code>需要与<code>if</code>语句或<code>else</code>语句在同一行，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>([name isEqual:<span class="string">@"tom"</span>])&#123;</div><div class="line"></div><div class="line">	<span class="built_in">NSLog</span>(<span class="string">@"This is tom"</span>);</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line">	<span class="built_in">NSLog</span>(<span class="string">@"not tom"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  而不要写成</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>([name isEqual:<span class="string">@"tom"</span>])</div><div class="line">	<span class="built_in">NSLog</span>(<span class="string">@"This is tom"</span>);</div></pre></td></tr></table></figure>
<p>  或不要写成</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>([name isEqual:<span class="string">@"tom"</span>]) <span class="built_in">NSLog</span>(<span class="string">@"This is tom"</span>);</div></pre></td></tr></table></figure>
<p>  <code>switch/while/for/do while</code>语句的写法与if/else语句保持一致。</p>
</li>
<li><p><strong>行间距</strong></p>
<p>  在属性声明，方法声明，方法调用时，</p>
<ul>
<li>属性声明之间，方法声明之间，不留空行</li>
<li>属性声明块和方法声明块之间添加一空行    </li>
<li>多个方法处理一个复杂逻辑，会形成方法声明块，不同的方法声明块之间保留一空行</li>
<li>方法定义之间要添加一个空行      <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// MMAlertViewController.h</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MMAlertViewController</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> showNetworkActivity ;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> modalAlert ;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)showSuccessAlertView ;</div><div class="line">- (<span class="keyword">void</span>)showSuccessAlertViewDismissAfter:(<span class="built_in">NSTimeInterval</span>) timer;</div><div class="line"><span class="keyword">@end</span></div><div class="line">	</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// MMAlertViewController.m</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MMAlertViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)showSuccessAlertView</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">self</span> buildSuccessView];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)showSuccessAlertViewDismissAfter:(<span class="built_in">NSTimeInterval</span>) timer</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">self</span> showSuccessAlertView];</div><div class="line">    <span class="keyword">self</span>.autoDissmissTimer = timer ;</div><div class="line">    [<span class="keyword">self</span> autoDismissAfterTimeInterval];</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="类-class-命名"><a href="#类-class-命名" class="headerlink" title="类(class)命名"></a>类(class)命名</h3><p>类名和协议名称需要添加前缀，并以驼峰形式的大小写混用模式命名，如：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MMRootViewController</div></pre></td></tr></table></figure></p>
<h3 id="分类-categories-命名"><a href="#分类-categories-命名" class="headerlink" title="分类(categories)命名"></a>分类(categories)命名</h3><p>分类名称的归类必须唯一，在命名上要突出该分类的所要解决的问题集，如：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIView</span>+Dimensions.h</div><div class="line"><span class="built_in">UIView</span>+Dimensions.m</div></pre></td></tr></table></figure></p>
<p>表明该扩展用以添加UIView的定位相关的方法。</p>
<h3 id="属性-property-命名"><a href="#属性-property-命名" class="headerlink" title="属性(property)命名"></a>属性(property)命名</h3><p>属性用以声明一个类的存取器(accessor methods)，要求以小写字母开头，驼峰式大小写字母混写。如：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>) <span class="built_in">NSString</span> *title;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>) <span class="built_in">BOOL</span> fontColorAlpha;</div></pre></td></tr></table></figure></p>
<h3 id="变量-variable-命名"><a href="#变量-variable-命名" class="headerlink" title="变量(variable)命名"></a>变量(variable)命名</h3><p>以小写字母开头，驼峰式大小写字母混写形式命名。要求词能达意，在适当的范围内可以将名称用长字符串描述的形式详细化。</p>
<ul>
<li>普通变量中，指针类型的变量名<strong>*</strong>需要在变量名前，如<code>NSString *textColor</code>，避免<code>NSString* textColor</code>,或者<code>NSString * textColor</code>;</li>
<li>实例变量中，变量的名称是以下划线<code>_</code> 开始，如<code>_passwordField</code>;</li>
<li>常量名称中(#defines,enums,const)，应该以小写字母<code>k</code>开头,如:  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> kNumberOfColor = <span class="number">12</span> ；</div><div class="line"></div><div class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> *kUserName = <span class="string">@"kUserName"</span>;</div><div class="line"></div><div class="line"><span class="keyword">enum</span> AnimationType&#123;</div><div class="line">	kAnimationFade,</div><div class="line">	kAnimationZoom,</div><div class="line">	kAnimationZoomOut,</div><div class="line">	kAnimationZoomIn</div><div class="line">&#125; ;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="点符号-dot-notation-用法"><a href="#点符号-dot-notation-用法" class="headerlink" title="点符号(dot-notation)用法"></a>点符号(dot-notation)用法</h3><p>点符号只应用于属性的访问和赋值，避免点符号的多级引用，如正确的写法为：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">view.backgroundColor = [<span class="built_in">UIColor</span> yellowColor];</div><div class="line">[<span class="built_in">UIApplication</span> sharedApplication].delegate;</div></pre></td></tr></table></figure></p>
<p>不当的写法为：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[view setBackgroundColor:[<span class="built_in">UIColor</span> yellowColor]];</div><div class="line">[<span class="built_in">UIApplication</span> sharedApplication].delegate.keyWindow.rootViewController;</div></pre></td></tr></table></figure></p>
<h3 id="注释-comment"><a href="#注释-comment" class="headerlink" title="注释(comment)"></a>注释(comment)</h3><ul>
<li><p><strong>类(class)，分类(category)，协议(protocol)声明注释</strong></p>
<p>  每个以上提到的几个类型都要在头文件中以多行<code>//</code>的形式进行注释，说明类型的作用，<code>//</code>与每行的文字描述需要添加一个空格，并且在描述的首尾行中添加空白的<code>//</code>注释，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Application中所有Controller的父类</span></div><div class="line"><span class="comment">// 定义了所有VC常用的加载启动流程中会涉及到的方法，以及一些VC通用方法</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MMViewController</span> : <span class="title">UIViewController</span> </span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>方法声明注释</strong></p>
<p>  方法注释的格式与类声明注释的格式类似，由于Objective-C中支持合理范围内的较长文字描述的方法名称，以达到自解释的目的，所以对于一般的简单的方法来说可以忽略注释，但对于内部逻辑实现较为复杂，地位比较重要，参数字面含义较模糊的，返回值需要特殊说明的方法，那么需要添加详细的注释，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// 根据当前设备的旋转方向（横放/竖直）重新获取屏幕的主窗口的keyWindowframe区域，</span></div><div class="line"><span class="comment">// 设备的旋转,不会交替 window的frame的width和height，</span></div><div class="line"><span class="comment">// window的frame值由screen的bounds减去status bar的frame值</span></div><div class="line"><span class="comment">//</span></div><div class="line">- (<span class="built_in">CGRect</span>)getCurrentWindowBoundsDependOnOrientation ;</div></pre></td></tr></table></figure>
<p>  默认情况下方法的创建者和创建时间与类所在文件是一致的，对于那些后续加入的方法，或者在非本人创建和维护的类添加的方法，需要添加方法的创建时间和创建人，如</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// add by: zhujunliang 2014.5.6</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// 根据当前设备的旋转方向（横放/竖直）重新获取屏幕的主窗口的keyWindowframe区域，</span></div><div class="line"><span class="comment">// 设备的旋转,不会交替 window的frame的width和height，</span></div><div class="line"><span class="comment">// window的frame值由screen的bounds减去status bar的frame值</span></div><div class="line"><span class="comment">//</span></div><div class="line">- (<span class="built_in">CGRect</span>)getCurrentWindowBoundsDependOnOrientation ;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="单例"><a href="#单例" class="headerlink" title="单例"></a>单例</h3><p>Objective-C中线程安全的单例模式的实现模式如下：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">id</span>)sharedInstance </div><div class="line">&#123;</div><div class="line"></div><div class="line">   <span class="keyword">static</span> <span class="keyword">id</span> sharedInstance = <span class="literal">nil</span>;</div><div class="line"></div><div class="line">   <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line">   </div><div class="line">   <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">      sharedInstance = [[<span class="keyword">self</span> alloc] init];</div><div class="line">   &#125;);	</div><div class="line">   <span class="keyword">return</span> sharedInstance;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="块-Blocks"><a href="#块-Blocks" class="headerlink" title="块(Blocks)"></a>块(Blocks)</h3><p>在Objective-C中，根据不同的使用方式，块(Blocks)的语法包括以下几种</p>
<ul>
<li><p><strong>局部变量块</strong></p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)method</div><div class="line">&#123;   ...</div><div class="line">	returnType (^blockName)(parameterTypes) = ^returnType(parameters) &#123;...&#125;;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>属性块</strong></p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) returnType (^blockName)(parameterTypes);</div></pre></td></tr></table></figure>
</li>
<li><p><strong>方法参数(parameter)块</strong></p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)someMethodThatTakesABlock:(returnType (^)(parameterTypes))blockName;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>方法调用参数(argument)块</strong></p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[someObject someMethodThatTakesABlock: ^returnType (parameters) &#123;...&#125;];</div></pre></td></tr></table></figure>
</li>
<li><p><strong><code>typedef</code>定义块</strong></p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> returnType (^TypeName)(parameterTypes);</div><div class="line"><span class="comment">// 或者</span></div><div class="line">TypeName blockName = ^returnType(parameters) &#123;...&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="图片命名"><a href="#图片命名" class="headerlink" title="图片命名"></a>图片命名</h3><p>图片的名称形式上与属性名类似，小写字母开头，驼峰式大小写字母混用，但重点是需要保持图片命名的语义化，突出图片所用UI组件的布局，位置，功能，状态，如</p>
<ul>
<li><strong>应用程序logo</strong> : <em>appLogo</em> , <em>appLogo@2x</em></li>
<li><strong>顶部导航栏背景</strong> : <em>topNavToolBarBackground</em> , <em>topNavToolBarBackground@2x</em></li>
<li><strong>返回按钮</strong>: <em>backBtn</em> , <em>backBtn@2x</em></li>
<li><strong>提交按钮常态，禁用态，选中态</strong> :<ul>
<li><em>submitBtnNormal</em>，<em>submitBtnNormal@2x</em> ;</li>
<li><em>submitBtnDisabled</em> , <em>submitBtnDisabled@2x</em> ;</li>
<li><em>submitBtnSelected</em> , <em>submitBtnSelected@2x</em></li>
</ul>
</li>
</ul>
<h3 id="Prefix-pch文件"><a href="#Prefix-pch文件" class="headerlink" title="Prefix.pch文件"></a>Prefix.pch文件</h3><p>Xocde支持Prefix文件，新建项目时会自动添加Prefix文件到项目中，格式为 _项目名称_Prefix.pch_ ，如项目名称为MolaSyncPro，那么Prefix文件为 <em>MolaSyncPro-Prefix.pch</em> 。该文件中引入的所有头文件，在项目构建时(build)都会隐式的自动添加到其它工程的文件中。合理使用Prefix文件会提升项目的构建速度，预编译后的Prefix在每次项目构建时只是简单的进行加载而不是重复的二次编译，因此可以将项目中关键的配置头文件，宏定义文件，以及那些在整个项目周期内<strong>不会经常变动的</strong>代码包含进Prefix文件。</p>
<h3 id="CGGeometry函数"><a href="#CGGeometry函数" class="headerlink" title="CGGeometry函数"></a>CGGeometry函数</h3><p>CGGeometry.h中定义了操作几何信息的各种快捷函数，在使用CGRect,CGSize,CGPoint等几何结构时，我们尽量使用这些快捷函数，避免使用在结构体上使用多级<code>.</code>来引用属性或为属性赋值，如鼓励以下正确的做法:
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGRect</span> frame = <span class="keyword">self</span>.view.frame;</div><div class="line"></div><div class="line"><span class="built_in">CGFloat</span> x = <span class="built_in">CGRectGetMinX</span>(frame) ,</div><div class="line">	    y = <span class="built_in">CGRectGetMinY</span>(frame) ,</div><div class="line">    width = <span class="built_in">CGRectGetWidth</span>(frame) ,</div><div class="line">   height = <span class="built_in">CGRectGetHeight</span>(frame) ;</div></pre></td></tr></table></figure></p>
<p>避免以下做法
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGRect</span> frame = <span class="keyword">self</span>.view.frame;</div><div class="line"></div><div class="line"><span class="built_in">CGFloat</span> x = frame.origin.x ,</div><div class="line">	    y = frame.origin.y ,</div><div class="line">    width = frame.size.width ,</div><div class="line">   height = frame.size.height;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>本小节的用法只是推荐使用，并非强制。</p>
</blockquote>
<h3 id="使用-pragma-mark"><a href="#使用-pragma-mark" class="headerlink" title="使用#pragma mark -"></a>使用#pragma mark -</h3><p>一个功能复杂的类有时会包含大量的属性和方法声明以及方法实现，而且属性之间，方法之间根据完成功能的不同会形成代码块，因此为了更加清晰的区分这些代码块，此处规定我们要使用<code>#pragma mark -</code>控制指令来划分这些代码块，以方便后期代码的分类，快速查找和维护。如，在同一个Controller中的方法实现如下:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - UIPopoverDelegate</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)popoverControllerDidDismissPopover:(<span class="built_in">UIPopoverController</span> *)popoverController</div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark UITableViewDataSource</span></div><div class="line"></div><div class="line">- (<span class="built_in">NSInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)tableView</div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo	</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo	</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UITableViewCell</span>*)tableView:(<span class="built_in">UITableView</span> *)tableView cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</div><div class="line">&#123;</div><div class="line">    </div><div class="line">	<span class="comment">// todo	 </span></div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</div><div class="line">&#123;</div><div class="line">	<span class="comment">// todo</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="私有属性-amp-amp-私有方法"><a href="#私有属性-amp-amp-私有方法" class="headerlink" title="私有属性&amp;&amp;私有方法"></a>私有属性&amp;&amp;私有方法</h3><p>在Objective-C中，<strong>分类(Categories)</strong>用以声明和实现实例方法和类方法，虽然语法上也可以在<strong>分类(Categories)</strong>中声明<strong>属性(property)</strong>，但并不鼓励这样做，所有私有属性和私有方法都应该在<strong>类扩展(Class extensions)</strong>中进行定义，如：</p>
<pre><code>@interface XYZPerson ()

@property (nonatomic) NSObject *privateProperty;

- (void)privateMethod ;

@end
</code></pre><h3 id="对象字面量-Literals"><a href="#对象字面量-Literals" class="headerlink" title="对象字面量(Literals)"></a>对象字面量(Literals)</h3><p>Xcode4.4中添加了对对象字面量的支持，以更加快捷的方式创建对象，因此尽量使用对象字面量的形式来创建<code>NSString</code>,<code>NSArray</code>,<code>NSDictionary</code>,<code>NSNumber</code>类型的对象，在向数组或集合的字面量中添加空对象时，切勿添加<code>nil</code>值，而应该使用<code>NULL</code>值代替，如:
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *positions = @[<span class="string">@"CEO"</span>, <span class="string">@"CIO"</span>, <span class="string">@"CFO"</span>, <span class="string">@"COO"</span>, <span class="string">@"CTO"</span>];</div><div class="line"><span class="built_in">NSDictionary</span> *persons = @&#123;<span class="string">@"CEO"</span> : <span class="string">@"Tom"</span>, <span class="string">@"CIO"</span> : <span class="string">@"JIM"</span>, <span class="string">@"CFO"</span> : <span class="string">@"Polu"</span>, <span class="string">@"COO"</span>:<span class="string">@"Jemeas"</span> , <span class="string">@"CTO"</span> : <span class="string">@"Marry"</span>&#125;;</div><div class="line"><span class="built_in">NSNumber</span> *allowed = @YES;</div><div class="line"><span class="built_in">NSNumber</span> *count = @<span class="number">1381</span>;</div></pre></td></tr></table></figure></p>
<p>而不应该用以下方式
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *positions = [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"CEO"</span>, <span class="string">@"CIO"</span>, <span class="string">@"CFO"</span>, <span class="string">@"COO"</span>, <span class="string">@"CTO"</span>];</div><div class="line"><span class="built_in">NSDictionary</span> *persons =  [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys: <span class="string">@"Tom"</span>, <span class="string">@"CEO"</span> , <span class="string">@"JIM"</span>,<span class="string">@"CIO"</span>, <span class="string">@"Polu"</span>, <span class="string">@"CFO"</span>,<span class="string">@"Jemeas"</span> , <span class="string">@"COO"</span> , <span class="string">@"Marry"</span>,<span class="string">@"CTO"</span>];</div><div class="line"><span class="built_in">NSNumber</span> *allowed = [<span class="built_in">NSNumber</span> numberWithBool:<span class="literal">YES</span>];</div><div class="line"><span class="built_in">NSNumber</span> *count = [<span class="built_in">NSNumber</span> numberWithInteger:<span class="number">1381</span>];</div></pre></td></tr></table></figure></p>
<p>在格式上，对于复杂的数组和集合对象字面量，需要将元素分割为多行创建，如
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *positions = @[	</div><div class="line">	<span class="string">@"Chief Executive Officer"</span>, </div><div class="line">	<span class="string">@"Chief Information Officer"</span>,</div><div class="line">	<span class="string">@"Chief Financial Officer"</span>,</div><div class="line">	<span class="string">@"Chief Operating Officer"</span>, </div><div class="line">	<span class="string">@"Chief Technology Officer"</span></div><div class="line">];</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span> *persons =  @&#123;</div><div class="line">	<span class="string">@"Chief Executive Officer"</span> : <span class="string">@"Tom"</span>, </div><div class="line">	<span class="string">@"Chief Information Officer"</span> : <span class="string">@"JIM"</span>, </div><div class="line">	<span class="string">@"Chief Financial Officer"</span> : <span class="string">@"Polu"</span>, </div><div class="line">	<span class="string">@"Chief Operating Officer"</span>:<span class="string">@"Jemeas"</span> ,</div><div class="line">	<span class="string">@"Chief Technology Officer"</span> : <span class="string">@"Marry"</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>尽量保持多行元素间的对齐。</p>
<h3 id="属性-Properties-和实例变量-Instance-Variables"><a href="#属性-Properties-和实例变量-Instance-Variables" class="headerlink" title="属性(Properties)和实例变量(Instance Variables)"></a>属性(Properties)和实例变量(Instance Variables)</h3><p>默认情况下，每个<code>readwrite</code>属性(Property)都有一个实例变量(Instance variable)来保存其对象值，并且编译器会自动在属性上执行synthesize操作以生成对应的实例变量(Instance variable)。实例变量(Instance variable)会持有对象的值，没有特殊标明的情况下实例变量的名称与属性名称相同，但会以下划线<code>_</code>开头。如声明属性
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MMPerson</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *name;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>那么属性<code>name</code>的实例变量是<code>_name</code>。所以尽量避免重新声明属性(Property)的实例变量(Instance variable),如对于以上<code>MMPerson</code>类不正确的做法是
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MMPerson</span> : <span class="title">NSObject</span></span>&#123;</div><div class="line">	<span class="built_in">NSString</span> *name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *name;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>在编码中我们推荐使用属性，并尽量使用使用点号来操作属性，或者直接使用编译器默认synthesize生成的实例变量(Instance variable)，在方法中，实例变量(Instance variable)的下划线<code>_</code>能够很好的与局部变量区分开来。</p>
<p>需要注意的是在类的<code>init</code>方法实现中，推荐使用实例变量来进行对象的初始化操作，而不适用self.propertyName的形式来初始化对象，如正确的写法是：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)init</div><div class="line">&#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// initialize instance variables here</span></div><div class="line">        _name = <span class="string">@"Tom"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而不要
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)init</div><div class="line">&#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">self</span>.name = <span class="string">@"Tom"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="删除自动生成的不必要的代码注释和模板"><a href="#删除自动生成的不必要的代码注释和模板" class="headerlink" title="删除自动生成的不必要的代码注释和模板"></a>删除自动生成的不必要的代码注释和模板</h3><p>使用Xcode的新建文件的功能，在继承Objective-C原生类，实现自定义的类时，Xcode在新的文件中会自动添加一些注释以及代码模板，如继承UIView时，<code>.m</code>文件中会自动添加<code>drawRect:</code>方法
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">// Only override drawRect: if you perform custom drawing.</div><div class="line">// An empty implementation adversely affects performance during animation.</div><div class="line">- (void)drawRect:(CGRect)rect &#123;</div><div class="line">    // Drawing code</div><div class="line">&#125;</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>在继承UIViewController时会自动生成<code>-(void)prepareForSegue:sender:</code>方法
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">#pragma mark - Navigation</div><div class="line"></div><div class="line">// In a storyboard-based application, you will often want to do a little preparation before navigation</div><div class="line">- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender &#123;</div><div class="line">    // Get the new view controller using [segue destinationViewController].</div><div class="line">    // Pass the selected object to the new view controller.</div><div class="line">&#125;</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>尤其是在继承UITableViewController时，会在<code>-m</code>文件中添加诸多<code>UITableViewDelegate</code>和<code>UITableViewDataSource</code>代理方法。</p>
<p>但是，Xcode生成的新文件中，自动添加的英文注释以及代码模板并不是我们必须要使用的，所以根据具体情况，我们需要手工删除那些我们不需要的注释，以及不会实现的方法的代码模板或者片段，以保证代码整洁、清爽，增加代码的可阅读性。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1" target="_blank" rel="external">Coding Guidelines for Cocoa</a></li>
<li><a href="https://github.com/NYTimes/objective-c-style-guide" target="_blank" rel="external">NYTimes Objective-C Style Guide</a></li>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/objcguide.xml" target="_blank" rel="external">Google Objective-C Style Guide</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html" target="_blank" rel="external">Blocks Programming Topics</a></li>
<li><a href="https://developer.apple.com/library/ios/technotes/tn2190/_index.html" target="_blank" rel="external">Speeding up your Xcode Builds</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html#//apple_ref/doc/uid/10000163i-CH1-SW2" target="_blank" rel="external">Configuring a Project for SDK-Based Development</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html" target="_blank" rel="external">CGGeometry Reference</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW3" target="_blank" rel="external">Customizing Existing Classes</a></li>
<li><a href="http://zh-google-styleguide.readthedocs.org/en/latest/google-objc-styleguide/" target="_blank" rel="external">Google Objective-C Style Guide 中文版</a></li>
<li><a href="http://en.wikipedia.org/wiki/Coding_conventions#Software_maintenance" target="_blank" rel="external">Coding conventions</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW1" target="_blank" rel="external">Encapsulating Data</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/06/24/Mac-OS-X下安装nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/06/24/Mac-OS-X下安装nginx/" itemprop="url">Mac OS X下安装nginx</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-06-24T00:00:00+08:00">
                2014-06-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/06/24/Mac-OS-X下安装nginx/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/06/24/Mac-OS-X下安装nginx/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><p>本机Mac系统版本为Mac OS X 10.9.3，选择安装稳定版的(Stable Version)nginx-1.6.0。</p>
<blockquote>
<p>本机已经通过Xcode在系统上安装了GCC编译器,如果你的Mac系统上尚未安装GCC的话，首先需要将GCC安装到自己的机器上。</p>
</blockquote>
<h3 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h3><ol>
<li><p>下载nginx</p>
<p> 在nginx官网下载页面上<a href="http://nginx.org/en/download.html" target="_blank" rel="external">下载nginx-1.6.0稳定版</a>。</p>
</li>
<li><p>还原压缩文件</p>
<p> 下载完成之后将压缩包解压缩还原，首先打开Mac OS X的终端，使用<code>cd</code>命令切换到nginx下载文件的目录中，之后可以使用以下命令</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -zvxf nginx-1.6.0.tar.gz</div></pre></td></tr></table></figure>
<p> 解压缩文件完成后，如果未指定文件的解压目录，则会在同级目录下生成新的源码目录<strong>nginx-1.6.0</strong></p>
</li>
<li><p>编译安装    </p>
<p> 在终端中使用<code>cd</code>命令切换到nginx源码目录中，依次运行以下命令</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> nginx-1.6.0</div><div class="line">$ ./configure</div></pre></td></tr></table></figure>
<p> <code>./configure</code>首次执行完成后,会出现以下错误提示</p>
<blockquote>
<p>./configure: error: the HTTP rewrite module requires the PCRE library.
 You can either disable the module by using –without-http_rewrite_module
 option, or install the PCRE library into the system, or build the PCRE library
 statically from the source with nginx by using –with-pcre=<path></path> option.</p>
</blockquote>
<p> 大意是，nginx的HTTP rewrite模块依赖一个名为PCRE第三方库，可以选择使用<code>-without-http_rewrite_module</code>选项禁止HTTP rewite模块；或者在当前机器上先安装PCRE库，之后在重新运行该命令，继续安装过程。
 我选择先安装PCRE库，因为之前我的本机安装了Homebrew管理工具，所以我使用Homebrew来安装PCRE库（否则需要<a href="http://www.pcre.org/" target="_blank" rel="external">下载PCRE</a>库的源码，然后编译安装,这个比较麻烦）。</p>
<p> 在终端中，使用Homebrew安装PCRE过程如下：</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">192:nginx-1.6.0 manjun.han$ brew search pcre</div><div class="line">pcre	pcre++</div><div class="line">192:nginx-1.6.0 manjun.han$ brew install pcre</div><div class="line">==&gt; Downloading https://downloads.sf.net/project/machomebrew/Bottles/pcre-8.35.mavericks.bottle.tar.gz</div><div class="line"><span class="comment">### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ###  100.0%</span></div><div class="line">==&gt; Pouring pcre-8.35.mavericks.bottle.tar.gz</div><div class="line">🍺  /usr/<span class="built_in">local</span>/Cellar/pcre/8.35: 146 files, 5.8M</div><div class="line">192:nginx-1.6.0 manjun.han$</div></pre></td></tr></table></figure>
<p> PCRE安装完成后，在终端<strong>重新切换</strong>到在nginx的目录中，重新运行<code>./configure</code>命令，本次命令顺利执行完毕，继续运行以下命令</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ make</div></pre></td></tr></table></figure>
<p> 之后继续执行以下命令</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ `sudo make install`</div></pre></td></tr></table></figure>
<p> <code>sudo make install</code>命令结束，nginx安装完成后终端输出nginx的配置信息</p>
 <figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Configuration summary</div><div class="line">  + using system PCRE library</div><div class="line">  + OpenSSL library is not used</div><div class="line">  + md5: using system crypto library</div><div class="line">  + sha1: using system crypto library</div><div class="line">  + using system zlib library</div><div class="line"></div><div class="line">  nginx path prefix: <span class="string">"/usr/local/nginx"</span></div><div class="line">  nginx binary file: <span class="string">"/usr/local/nginx/sbin/nginx"</span></div><div class="line">  nginx configuration prefix: <span class="string">"/usr/local/nginx/conf"</span></div><div class="line">  nginx configuration file: <span class="string">"/usr/local/nginx/conf/nginx.conf"</span></div><div class="line">  nginx pid file: <span class="string">"/usr/local/nginx/logs/nginx.pid"</span></div><div class="line">  nginx error <span class="built_in">log</span> file: <span class="string">"/usr/local/nginx/logs/error.log"</span></div><div class="line">  nginx http access <span class="built_in">log</span> file: <span class="string">"/usr/local/nginx/logs/access.log"</span></div><div class="line">  nginx http client request body temporary files: <span class="string">"client_body_temp"</span></div><div class="line">  nginx http proxy temporary files: <span class="string">"proxy_temp"</span></div><div class="line">  nginx http fastcgi temporary files: <span class="string">"fastcgi_temp"</span></div><div class="line">  nginx http uwsgi temporary files: <span class="string">"uwsgi_temp"</span></div><div class="line">  nginx http scgi temporary files: <span class="string">"scgi_temp"</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>以上三个命令成功运行完成后，nginx已经成功安装到Mac机上。</p>
<h3 id="启动并验证nginx服务器"><a href="#启动并验证nginx服务器" class="headerlink" title="启动并验证nginx服务器"></a>启动并验证nginx服务器</h3><p>由安装过程的最后一步提示信息可知nginx服务器的安装目录在<code>/usr/local/nginx/sbin/nginx</code>,需要在命令行中启动nginx，切换到nginx的目录
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin/</div></pre></td></tr></table></figure></p>
<p>启动nugix
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo ./nginx</div></pre></td></tr></table></figure></p>
<p>打开浏览器，在地址栏中输入<code>localhost</code>,显示nginx的欢迎页，则说明nginx已经成功安装完毕。</p>
<img src="/2014/06/24/Mac-OS-X下安装nginx/1.png" alt="1.png" title="">
<blockquote>
<p>nginx默认运行在80端口下，由于80端口容易产生冲突，安装过程中需注意。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://wiki.nginx.org/Install" target="_blank" rel="external">nginx install</a></li>
<li><a href="http://nginx.org/en/docs/configure.html" target="_blank" rel="external">Building nginx from Sources</a></li>
<li><a href="http://wiki.nginx.org/NginxCommandLine" target="_blank" rel="external">nginx CommandLine</a></li>
<li><a href="http://www.pcre.org/" target="_blank" rel="external">PCRE</a></li>
<li><a href="http://os.51cto.com/art/201111/304611.htm" target="_blank" rel="external">Nginx安装配置与服务搭建</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="monjer" />
          <p class="site-author-name" itemprop="name">monjer</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">136</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">84</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">monjer</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"monjer"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  





  

  

  

  

  

</body>
</html>
