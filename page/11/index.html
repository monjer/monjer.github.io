<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="monjer's note" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="monjer&#39;s note">
<meta property="og:url" content="http://monjer.github.io/page/11/index.html">
<meta property="og:site_name" content="monjer&#39;s note">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="monjer&#39;s note">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://monjer.github.io/page/11/"/>





  <title>monjer's note</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2b4f08dbd457a5e207bff33f77b0eafc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">monjer's note</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/04/05/表单元素的disabled属性与readonly属性说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/04/05/表单元素的disabled属性与readonly属性说明/" itemprop="url">表单元素的disabled属性与readonly属性说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-04-05T00:00:00+08:00">
                2014-04-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/04/05/表单元素的disabled属性与readonly属性说明/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/04/05/表单元素的disabled属性与readonly属性说明/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Web页面的表单操作中，某些情况下我们需要有条件的来控制某些表单元素禁止提交或禁止编辑，HTML标签中<code>disabled</code>属性和<code>readonly</code>属性则分别用来实现这样的功能。两个属性都是<a href="http://www.whatwg.org/specs/web-apps/current-work/#boolean-attributes" target="_blank" rel="external">boolean attribute</a></p>
<h3 id="disabled属性"><a href="#disabled属性" class="headerlink" title="disabled属性"></a>disabled属性</h3><p><code>disabled</code><strong>属性(attribute)</strong>用来禁用用户编辑表单控件并阻止该控件提交到服务器端。添加了<code>disabled</code><strong>属性(attribute)</strong>的表单控件被称为<em>disabled控件</em>，<em>disabled控件</em>具有以下特征：</p>
<ul>
<li>不会接受焦点</li>
<li>忽略键盘的tab导航</li>
<li>不能被提交到服务器端</li>
</ul>
<p>支持<code>disabled</code><strong>属性(attribute)</strong>的表单元素包括:<code>button</code>,<code>input</code>,<code>textarea</code>,<code>option</code>,<code>optgroup</code>,<code>select</code>，示例如下:
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"myTxt"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"input text value"</span> <span class="attr">disabled</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用JavaScript动态设置<code>disabled</code><strong>属性(property)</strong>的值代码示例如下:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> txt = <span class="built_in">document</span>.getElementById(<span class="string">"myTxt"</span>);</div><div class="line"><span class="comment">// 设置disabled</span></div><div class="line">txt.disabled = <span class="literal">true</span> ;</div><div class="line"><span class="comment">// 取消disabled</span></div><div class="line">txt.disabled = <span class="literal">false</span> ;</div></pre></td></tr></table></figure></p>
<h3 id="readonly属性"><a href="#readonly属性" class="headerlink" title="readonly属性"></a>readonly属性</h3><p><code>readonly</code><strong>属性(attribute)</strong>用来禁止用户编辑表单元素的值，添加了<code>readonly</code><strong>属性(attribute)</strong>的表单空间被称为<em>readonly控件</em>，<em>readonly控件</em>具有以下特性：</p>
<ul>
<li>可以接收焦点，但不能被用户编辑</li>
<li>可以使用键盘的tab导航</li>
<li>可以被提交到服务器端</li>
</ul>
<p>支持<code>readonly</code><strong>属性(attribute)</strong>的表单元素包括:<code>input</code>,<code>textarea</code>，示例如下：
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"myTxt"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"input text value"</span> <span class="attr">readonly</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用JavaScript动态设置<code>readonly</code><strong>属性(property)</strong>的值代码示例如下:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> txt = <span class="built_in">document</span>.getElementById(<span class="string">"myTxt"</span>);</div><div class="line"><span class="comment">// 设置readOnly</span></div><div class="line">txt.readOnly = <span class="literal">true</span> ;</div><div class="line"><span class="comment">// 取消readOnly</span></div><div class="line">txt.readOnly = <span class="literal">false</span> ;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>HTML标签的<code>readonly</code>属性(attribute)对应于DOM元素的<code>readOnly</code>属性(property)</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://stackoverflow.com/questions/6531738/why-disabled-disabled-and-not-disabled/6531804#6531804" target="_blank" rel="external">why disabled=“disabled” and not disabled=“!”?</a></li>
<li><a href="http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.12.1" target="_blank" rel="external">W3C Disabled controls</a></li>
<li><a href="http://reference.sitepoint.com/html/input/disabled" target="_blank" rel="external">disabled (HTML attribute)</a></li>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/#boolean-attributes" target="_blank" rel="external">Boolean attributes</a></li>
<li><a href="http://api.jquery.com/prop/" target="_blank" rel="external">jQuery.prop()</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/" itemprop="url">使用URL Scheme判断IOS设备是否安装了某个App</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-28T00:00:00+08:00">
                2014-03-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="URL-Scheme介绍"><a href="#URL-Scheme介绍" class="headerlink" title="URL Scheme介绍"></a>URL Scheme介绍</h3><p>苹果应用开发中涉及到一个<strong>URL Scheme</strong>的概念，每个<strong>URL Scheme</strong>都对应一个协议，使用<strong>URL Scheme</strong>能够更好的将本地IOS应用或Web应用与IOS的系统应用进行整合，从而为用户提供更好的交互便捷。如通过<strong>URL Scheme</strong>我们可以在自己的应用程序中很方便的打开苹果的地图应用，邮件应用，或者在iPhone中直接在应用内部的链接中进行拨号操作。例如，Native 应用可以调用UIApplication的<a href="1">openURL</a>方法来打开邮件应用(对应<strong>mailto:</strong>协议)：
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"mailto:frank@wwdcdemo.example.com"</span>]];</div></pre></td></tr></table></figure></p>
<p>或者，在Web应用中通过链接打开邮件应用，如
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mailto:frank@wwdcdemo.example.com"</span>&gt;</span>John Frank<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>关于Apple内置的<strong>URL Scheme</strong>，参见<a href="2">Apple URL Scheme Reference</a>。</p>
<h3 id="判断IOS设备是否安装了某个App"><a href="#判断IOS设备是否安装了某个App" class="headerlink" title="判断IOS设备是否安装了某个App"></a>判断IOS设备是否安装了某个App</h3><p>以上介绍的是Apple内置的<strong>URL Scheme</strong>，Apple同样支持<strong>自定义的URL Scheme</strong>，每个应用程序本身在自己的配置中都能指定自己<strong>唯一的URL Scheme</strong>，这样在Safari的地址中输入我们<strong>自定义的URL Scheme</strong>并回车确定就会打开我们的应用，同时假如我们知道一个其它应用的<strong>URL Scheme</strong>，我们可以使用UIApplication的<a href="3">canOpenURL:</a>方法来判断当前设备上是否已经安装了该应用程序。如新建测试应用<strong>MyApp</strong>，在<strong>tagert</strong>下<strong>Info</strong>面板中最后一项<strong>URL Types选项</strong>中点击添加一个<strong>URL Types</strong>，可以看到<strong>URL Schemes</strong>输入框，此处可以输入指定当前应用自己的URL Scheme，此处我们指定为<strong>MyApp</strong>，如图：</p>
<img src="/2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/1.png" alt="1.png" title="">
<p>之后，运行测试工程，在正常启动完成后点击模拟器的Home键，并打开Safari，在其地址栏中输入<strong>MyApp://</strong>回车，可以切换到MyApp应用,如图：</p>
<img src="/2014/03/28/使用URL-Scheme判断IOS设备是否安装了某个App/2.png" alt="2.png" title="">
<p>同理假如我们将<strong>MyApp</strong>的URL Scheme暴露出去，第三方的应用程序拿到我们的URL Scheme后就可以通过<a href="3">canOpenURL:</a>方法判断设备中是否已经安装了我们的<strong>MyApp</strong>应用，如以下代码段可以插入到第三方程序中。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">BOOL</span> installed = [[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"MyApp://"</span>]];</div><div class="line"><span class="keyword">if</span>(installed)&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"已经安装了MyApp"</span>);</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"还未安装了MyApp"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第三方的开发平台（如QQ，微信等）注册的IOS应用都会被要求添加一个URL Scheme信息，指的就是我们以上介绍的URL Scheme，这样可以用来和第三方的应用完成通信。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="3">canOpenURL:</a></li>
<li><a href="2">Apple URL Scheme Reference</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-102207-TPXREF115" target="_blank" rel="external">CFBundleURLTypes</a></li>
<li><a href="1">openURL</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/25/iOS中使用Safari的Smart-App-Banners/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/25/iOS中使用Safari的Smart-App-Banners/" itemprop="url">IOS中使用Safari的Smart App Banners</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-25T00:00:00+08:00">
                2014-03-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/25/iOS中使用Safari的Smart-App-Banners/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/25/iOS中使用Safari的Smart-App-Banners/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Smart-App-Banners简介"><a href="#Smart-App-Banners简介" class="headerlink" title="Smart App Banners简介"></a>Smart App Banners简介</h3><p>IOS6下的Safari添加了项新功能,称作<strong>Smart App Banners</strong>,该功能是针对那些有Web站点的IOS应用的，通过在应用所属Web站点的页面进行一些设置，用户在iPad,iPhone上的Safari打开应用所在的Web站点时，Safari会在页面的顶部显示一个App Banner，来说明App的信息，并提示用户可以通过点击这个Banner来跳转到设备上的App Store，从而快捷的下载该应用，或者打开设备上已经安装好的该应用（Smart App Banner会自动检测当前用户设备上是否已经安装了该应用），之后用户重新在打开站点页面时，Banner会自动消失。</p>
<p>因为<strong>Smart App Banner</strong>是苹果自动帮助应用的站点页面加上去的，并提供了一致性的外观和内容项，用户会更加信赖这种展现形式，在提供用户便捷的同时促进了浏览应用站点用户下载该应用的量级，达到一种转换和推广的效果。</p>
<h3 id="实现Smart-App-Banners"><a href="#实现Smart-App-Banners" class="headerlink" title="实现Smart App Banners"></a>实现Smart App Banners</h3><p>在应用站点上实现支持<strong>Smart App Banners</strong>的方式十分简单，只要将以下形式<strong>meta</strong>标记添加到站点页面的<strong>head</strong>下即可：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-itunes-app"</span> <span class="attr">content</span>=<span class="string">"app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li><p><strong>app-id(必须)</strong>，此处指的是IOS应用的唯一标示符，在iTunes Connect中创建应用时会自动为该应用分配一个表示符号，也就是<strong>App ID</strong>,可以登陆iTunes Connect并在App的管理页面查看应用的<strong>App ID</strong>,如：</p>
  <img src="/2014/03/25/iOS中使用Safari的Smart-App-Banners/1.png" alt="1.png" title="">
<p>  也可以在<a href="2">iTunes Link Maker</a>指定的页面中输入应用的名称进行查询，如</p>
  <img src="/2014/03/25/iOS中使用Safari的Smart-App-Banners/2.png" alt="2.png" title="">
  <img src="/2014/03/25/iOS中使用Safari的Smart-App-Banners/3.png" alt="3.png" title="">
<p>  在link最末端的<strong>id</strong>和<strong>?mt</strong>之间的就是<strong>App ID(660018160)</strong>。
  这样一个简单的<strong>meta</strong>如下,</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-itunes-app"</span> <span class="attr">content</span>=<span class="string">"app-id=660018160&gt;</span></span></div></pre></td></tr></table></figure>
<p>  只要添加到站点页面即可。</p>
</li>
<li><p><strong>affiliate-data（可选）</strong>，此处做不介绍，请参考Apple的文档说明。</p>
</li>
<li><strong>app-argument（可选）</strong>，打开App时传递的参数，此出指定的参数会添加至调用<a href="3">application:openURL:sourceApplication:annotation:</a>方法中的<strong>openURL</strong>指定的参数。</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="1">Promoting Apps with Smart App Banners</a></li>
<li><a href="http://wordpress.org/plugins/smart-app-banners/" target="_blank" rel="external">Smart App Banners wordpress plugin</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/className-classList介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/className-classList介绍/" itemprop="url">className && classList介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:28:08+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/className-classList介绍/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/className-classList介绍/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="className"><a href="#className" class="headerlink" title="className"></a>className</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>DOM操作中经常会处理元素的样式名，几乎所有的HTML标签中都包含了<code>class</code>属性(除了<code>base</code>, <code>head</code>, <code>html</code>, <code>meta</code>, <code>param</code>, <code>script</code>, <code>style</code> 以及 <code>title</code>标签)，用于规定当前元素的<code>类名</code>，这里的<code>类名</code>指的是我们在样式表中按照规则为元素指定的类(class)。如:
    <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">	<span class="selector-class">.big</span>&#123;</div><div class="line">		<span class="attribute">font-size</span>:<span class="number">20px</span>;</div><div class="line">	&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">"big"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>也可以为单个元素标签添加多个类，如：
    <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">	<span class="selector-class">.big</span>&#123;</div><div class="line">		<span class="attribute">font-size</span>:<span class="number">20px</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-class">.textColor</span>&#123;</div><div class="line">		<span class="attribute">color</span>:<span class="number">#EEEEEE</span>;</div><div class="line">	&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">"big textColor"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>注:类名不能以”!”开头。</p>
</blockquote>
<p>在JavaScript中，在获取dom元素后可以通过<code>className</code>属性来为其获取或设置样式(在JavaScript中<code>class</code>为保留字，所以使用<code>className</code>代替。)，如：</p>
<pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.getElementById(<span class="string">"page"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 获取元素样式</span></div><div class="line"><span class="built_in">console</span>.log(p.className);</div><div class="line"></div><div class="line"><span class="comment">// 设置元素样式(此处相当于一个清除样式的操作)</span></div><div class="line">p.className = <span class="string">""</span>;</div></pre></td></tr></table></figure>
</code></pre><p>之后，在控制台中会输出:</p>
<pre><code>big textColor
</code></pre><p>标签会变为:
    <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>如果要为标签设置多个样式，可以以<code>空格</code>为分隔符将类名拼接成字符串为<code>className</code>进行赋值，如
    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> clsNames = <span class="string">"big textColor"</span> ;</div><div class="line"></div><div class="line">p.className = clsNames ;</div></pre></td></tr></table></figure></p>
<p>之后标签会变为:
    <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"page"</span> <span class="attr">class</span>=<span class="string">"big textColor"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h4 id="实际处理"><a href="#实际处理" class="headerlink" title="实际处理"></a>实际处理</h4><p>以上只是对DOM元素的<code>className</code>属性进行的简单说明和基本操作，在实际的的处理中，通常会用到的类名操作包括：</p>
<ul>
<li>添加单个类名</li>
<li>同时添加多个类名</li>
<li>判断是否包含某一类名</li>
<li>删除单个类名</li>
<li>同时删除多个类名</li>
<li>某一类名的toggle转换</li>
</ul>
<p>这中间可能同时会穿插DOM元素类型判断，字符串处理，正则表达式匹配。虽然实现起来并不算复杂，但也需要我们一点点的去堆代码。由于对于<code>className</code>的操作的通用性比较高，此部分的代码可以进行封装，而且多数类库中都结合自身的设计原则实现了对<code>className</code>的处理。比如，jQuery提供了:</p>
<ul>
<li><a href="http://api.jquery.com/addClass/" target="_blank" rel="external">addClass( className )</a></li>
<li><a href="http://api.jquery.com/addClass/" target="_blank" rel="external">addClass( function(index, currentClass) )</a></li>
<li><a href="http://api.jquery.com/addClass/" target="_blank" rel="external">removeClass( [className ] )</a></li>
<li><a href="http://api.jquery.com/addClass/" target="_blank" rel="external">removeClass( function(index, class) )</a></li>
<li><a href="http://api.jquery.com/hasClass/" target="_blank" rel="external">hasClass( className )</a></li>
<li><a href="http://api.jquery.com/toggleClass/" target="_blank" rel="external">toggleClass( className )</a></li>
</ul>
<p>YUI3中提供了:</p>
<ul>
<li><a href="http://yuilibrary.com/yui/docs/api/classes/DOM.html#method_addClass" target="_blank" rel="external">addClass ( element  className )</a></li>
<li><a href="http://yuilibrary.com/yui/docs/api/classes/DOM.html#method_hasClass" target="_blank" rel="external">hasClass ( element  className ) Boolean</a></li>
<li><a href="http://yuilibrary.com/yui/docs/api/classes/DOM.html#method_removeClass" target="_blank" rel="external">removeClass ( element  className )</a></li>
<li><a href="http://yuilibrary.com/yui/docs/api/classes/DOM.html#method_replaceClass" target="_blank" rel="external">replaceClass ( element  oldClassName  newClassName )</a></li>
<li><a href="http://yuilibrary.com/yui/docs/api/classes/DOM.html#method_toggleClass" target="_blank" rel="external">toggleClass ( element  className  addClass )</a></li>
</ul>
<p>利用现有框架的API，省去了我们重复堆码的时间。</p>
<h3 id="classList"><a href="#classList" class="headerlink" title="classList"></a>classList</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>js框架提供的主要功能之一是封装那些在web开发中经常要使用到的功能，提供跨浏览器的解决方案。有时我们会抱怨：<strong>对于那些常用而且必须的功能为什么不在w3c中进行标准化，之后浏览器厂商统一实现。这样做会减轻了开发者重复编码的负担，减少开发过程中对浏览器兼容性的考虑，使得类库更加轻量级。</strong>正如我们现在经常会对DOM元素的<code>className</code>进行处理一样，如果标准有定义，浏览器本身已经实现了这部分功能，那么我们岂不是会很轻松，以后的开发也会降低对库的依赖。</p>
<p>其实标准也是在需求中一步步完善的，有共性的需求才会有标准的出现。HTML5的出现为的就是进一步完善标准。这其中也增加了新的DOM属性，<code>classList</code>属性便是其中之一。</p>
<p><code>classList</code>的作用是用来简化DOM元素的<code>class</code>处理，返回一个DOM元素中<code>className</code>属性中包含的以<code>空格</code>分割的类名列表。通过
    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> clsList = element.classList</div></pre></td></tr></table></figure></p>
<p>可以获取DOM元素的样式列表并进行处理。</p>
<h4 id="classList的对象类型"><a href="#classList的对象类型" class="headerlink" title="classList的对象类型"></a>classList的对象类型</h4><p>element.classList对象的类型为<a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="external">DOMTokenList</a>。<a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="external">DOMTokenList</a>类型表示了一个用<code>空格</code>分割的符号(token)集合。它是一种类数组(ArrayLike)对象(就像JavaScript中的String对象一样)，可以像数组那样按照数字下标索引元素，当然索引是从0开始。常见的使用该类型的DOM属性包括：</p>
<ul>
<li>HTMLElement.classList</li>
<li>HTMLLinkElement.relList</li>
<li>HTMLAnchorElement.relList</li>
<li>HTMLAreaElement.relList</li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="external">DOMTokenList</a>包含了以下属性和方法
    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Property</span></div><div class="line">length</div><div class="line"></div><div class="line"><span class="comment">// Method</span></div><div class="line">item ( idx )<span class="comment">//返回集合idx索引指向的token</span></div><div class="line">contains ( token ) <span class="comment">//判断集合中是否包含token</span></div><div class="line">add ( token ) <span class="comment">// 向集合中添加token</span></div><div class="line">remove ( token ) <span class="comment">// 从集合中删除token</span></div><div class="line">toggle ( token ) <span class="comment">// 如果集合中存在token，则将其删除，并返回false；如果集合中不存在token，则将token加入其中，并返回true</span></div></pre></td></tr></table></figure></p>
<h4 id="classList对象的操作"><a href="#classList对象的操作" class="headerlink" title="classList对象的操作"></a>classList对象的操作</h4><p>明白了<code>element.classList</code>对象的类型后，可以清楚的看到可对<code>className</code>进行的操作。只要把<strong>token</strong>替换成<strong>代表样式的类名</strong>即可。如：
    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> length = p.classList.length ; <span class="comment">// 获取p元素中类名数量</span></div><div class="line">p.classList.item(<span class="number">1</span>); <span class="comment">// 获取p元素中索引为1的类名</span></div><div class="line">p.classList.add(<span class="string">"big"</span>); <span class="comment">// 向p元素中添加big类</span></div><div class="line">p.classList.remove(<span class="string">"big"</span>); <span class="comment">// 将big类从p元素中移除</span></div><div class="line">p.classList.contains(<span class="string">"big"</span>); <span class="comment">// 判断p元素中是否包含名为big的类</span></div><div class="line">p.classList.toggle(<span class="string">"big"</span>); <span class="comment">// 如果p元素中存在big类，则将其删除；如果p元素中不存在big类，则向p中添加big类</span></div></pre></td></tr></table></figure></p>
<p>通过以下代码可以对<code>classList</code>进行特性检测,来判断浏览器是否支持classList属性
    <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> support = <span class="built_in">document</span>.body.classList==<span class="literal">undefined</span> ? <span class="literal">false</span> : <span class="literal">true</span> ;</div></pre></td></tr></table></figure></p>
<h4 id="classList的缺点"><a href="#classList的缺点" class="headerlink" title="classList的缺点"></a>classList的缺点</h4><ul>
<li><p>浏览器兼容下欠佳，由于是新的标准，各浏览器对<code>classList</code>的支持以及实现方式存在差异，尤其是IE10后才支持<code>classList</code>。参见其<a href="http://caniuse.com/classlist" target="_blank" rel="external">兼容性列表</a></p>
</li>
<li><p>只能对单个类名进行操作，如果<code>add</code>,<code>remove</code>,<code>contains</code>,<code>toggle</code>方法中的类名参数包含<code>空格</code>，方法调用会报错，如在Chrome的console下调用</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">document.body.classList.add("cls1 cls2");//cls1,cls2中间包含了一个空格</div></pre></td></tr></table></figure>
</code></pre><p>  会报以下错误提示</p>
<blockquote>
<p>InvalidCharacterError: The string contains invalid characters.</p>
</blockquote>
</li>
</ul>
<h4 id="classList的一些跨浏览器实现"><a href="#classList的一些跨浏览器实现" class="headerlink" title="classList的一些跨浏览器实现"></a>classList的一些跨浏览器实现</h4><p>对于<code>classList</code>的跨浏览器实现一些个人或框架本身已经提供了比较好的解决方案和代码,如：</p>
<ul>
<li><a href="https://github.com/eligrey/classList.js" target="_blank" rel="external">classList.js</a></li>
<li><a href="http://docs.closure-library.googlecode.com/git/closure_goog_dom_classlist.js.source.html#line102" target="_blank" rel="external">Google closure classList.js</a></li>
</ul>
<p>完，以上！</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.w3school.com.cn/tags/att_standard_class.asp" target="_blank" rel="external">HTML Class</a></li>
<li><a href="https://developer.mozilla.org/zh-cn/DOM/element.className" target="_blank" rel="external">element.className</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/DOM/element.classList" target="_blank" rel="external">element.classList</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="external">DOMTokenList</a></li>
<li><a href="http://html5doctor.com/the-classlist-api/" target="_blank" rel="external">The classList API</a></li>
<li><a href="https://github.com/yui/yui3/blob/master/src/dom/js/dom-class.js" target="_blank" rel="external">YUI3 dom-class.js</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/Flex中获取application对象的方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/Flex中获取application对象的方式/" itemprop="url">Flex中获取application对象的方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:23:14+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/Flex中获取application对象的方式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/Flex中获取application对象的方式/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Flex应用程序中的根标签是<code>&lt;s:Application&gt;</code>(Spark application容器),或<code>&lt;mx:Application&gt;</code>(MX Application容器)。application容器是所有Flex组件的根，就像HTML文档中的<html>标签一样,所有的组件和脚本都将包含在application标签内。通常所有的全局对象或函数，也都会分别作为属性或方法添加至application中。通常代码中要通过首先获取application对象才能获得全局对象或方法。下面是两种在代码中获取application对象的方式,假设当前的应用程序名为MyApplication。</html></p>
<ol>
<li><p>通过FlexGlobals类:</p>
<p> FlexGlobals类包含了通用于同一Application Domain内的所有应用程序的变量的类，其包含    的公共属性只有两个，一个是constructor属性，两一个是topLevelApplication属性</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var application:MyApplication = FlexGlobals.topLevelApplication as MyApplication ;</div></pre></td></tr></table></figure>
</code></pre></li>
<li><p>通过SystemManager的application属性</p>
<p> SystemManager用来管理Flex应用程序窗口。每个Flex应用只包含一个SystemManager。SystemManager类中的application属性用来获得application对象。UIComponent对象作为FlexUI组件的上层类，通过UIComponent的systemManager属性，就可以获得全局仅有的SystemManager对象。这样在继承自UIComponent的所有UI组件内部都可以很方便的获取application对象，假如，有继承自UIComponent类的名为MyComponent的自定义组件，在其内部可以通过以下代码获得application：</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var sysManager:SystemManager = this.systemManager as SystemManager ;</div><div class="line">var application:MyApplication = sysManager.application as MyApplication ;</div></pre></td></tr></table></figure>
</code></pre></li>
</ol>
<p><strong>注意:</strong>上述两种获取application对象的方式，都需要根据具体应用程序的名称和类型进行合适的类型转换。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/配置Tomcat的URI编码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/配置Tomcat的URI编码/" itemprop="url">配置Tomcat的URI编码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/配置Tomcat的URI编码/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/配置Tomcat的URI编码/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Tomcat默认以<code>iso-8859-1</code>编码格式对所有web application请求的URI进行编码，即使用<code>iso-8859-1</code>对URI中除<code>%xx</code>之外的字符进行编码，这是开发过程中产生乱码的原因之一。<code>conf/server.xml</code>配置文件中<code>Connector</code>元素中的<code>URIEncoding</code>属性值用来设置URI的编码格式。</p>
<p>比如，设置URI编码为utf-8，需做如下配置</p>
<ul>
<li><p>使用HTTP Connector</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;Connector connectionTimeout=<span class="string">"20000"</span></div><div class="line">            port=<span class="string">"8080"</span></div><div class="line">            protocol=<span class="string">"HTTP/1.1"</span></div><div class="line">            redirectPort=<span class="string">"8443"</span></div><div class="line">            URIEncoding=<span class="string">"utf-8"</span>/&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>使用AJP connector</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Connector port=<span class="string">"8009"</span> protocol=<span class="string">"AJP/1.3"</span> URIEncoding=<span class="string">"utf-8"</span>/&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="1">The HTTP Connector</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/MySQL外键约束检测的控制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/MySQL外键约束检测的控制/" itemprop="url">MySQL外键约束检测的控制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/MySQL外键约束检测的控制/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/MySQL外键约束检测的控制/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>MySQL中使用动态的服务器变量<code>foreign_key_checks</code>来控制外键约束，由于是动态变量，这意味着在服务器运行时改变该变量的值不需要重启服务器。<code>foreign_key_checks</code>属于会话变量(Session),设置会话变量不需要特殊权限。</p>
<blockquote>
<p>MySQL中InnoDB引擎支持外键</p>
</blockquote>
<h3 id="查看当前外键约束检测"><a href="#查看当前外键约束检测" class="headerlink" title="查看当前外键约束检测"></a>查看当前外键约束检测</h3><p><strong>方式一</strong> : 使用<code>show variables like &#39;foreign_key_checks&#39;;</code>,如：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show variables like <span class="string">'foreign_key_checks'</span>;</div><div class="line">+--------------------+-------+</div><div class="line">| Variable_name      | Value |</div><div class="line">+--------------------+-------+</div><div class="line">| foreign_key_checks | ON    |</div><div class="line">+--------------------+-------+</div><div class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p><code>ON</code>代表打开，<code>OFF</code>代表关闭。</p>
<p><strong>方式二</strong> : 使用 <code>select @@foreign_key_checks;</code>语句，如
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select @@foreign_key_checks;</div><div class="line">+----------------------+</div><div class="line">| @@foreign_key_checks |</div><div class="line">+----------------------+</div><div class="line">|                    1 |</div><div class="line">+----------------------+</div><div class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p><code>1</code>代表打开，<code>0</code>代表关闭。</p>
<h3 id="设置外键约束检测"><a href="#设置外键约束检测" class="headerlink" title="设置外键约束检测"></a>设置外键约束检测</h3><p><strong>打开</strong>:
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">set</span> foreign_key_checks = 1 ;</div></pre></td></tr></table></figure></p>
<p><strong>关闭</strong>:
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">set</span> foreign_key_checks = 0 ;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>当关闭外键约束检测后，可以随便删除有外键约束的数据项(table row),或者是删除约束表。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://dev.mysql.com/doc/refman/5.1/zh/database-administration.html#dynamic-system-variables" target="_blank" rel="external">动态系统变量</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.1/zh/language-structure.html#system-variables" target="_blank" rel="external">系统变量</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#set-option" target="_blank" rel="external">Set 语句</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.1/zh/sql-syntax.html#select" target="_blank" rel="external">Select语句</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/iframe元素的用法总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/iframe元素的用法总结/" itemprop="url">iframe元素的用法总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/iframe元素的用法总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/iframe元素的用法总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="移除边框"><a href="#移除边框" class="headerlink" title="移除边框"></a>移除边框</h3><p>结合CSS的<code>border</code>属性和<code>iframe</code>标签的<code>frameBorder</code>属性完成对<code>&lt;iframe&gt;</code>元素移除边框的操作。如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">iframe&#123;</div><div class="line">    border:0; /*IE9+(包括IE9),以及其它浏览器*/</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span><span class="comment">&lt;!-- IE6/7/8必须设置frameborder="0" --&gt;</span></div></pre></td></tr></table></figure>
<h3 id="禁用滚动"><a href="#禁用滚动" class="headerlink" title="禁用滚动"></a>禁用滚动</h3><p>当<code>iframe</code>元素的文档内容的高宽度超过旗本身的高宽度时，<code>iframe</code>会出现滚动条，<code>scrolling</code>属性设置为<code>no</code>可以禁用滚动。
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">scrolling</span>=<span class="string">"no"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="去除默认内容边距"><a href="#去除默认内容边距" class="headerlink" title="去除默认内容边距"></a>去除默认内容边距</h3><p><code>marginheight</code>和<code>marginwidth</code>属性分别规定了其内容文档在垂直和水平方向上的边距。设置为<code>0</code>,可以去除默认的边距。
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="在新窗口中打开连接"><a href="#在新窗口中打开连接" class="headerlink" title="在新窗口中打开连接"></a>在新窗口中打开连接</h3><p>以下代码是<code>iframe</code>嵌入的页面文档，分别演示用<code>&lt;a&gt;</code>标签和使用JavaScript代码在嵌入的页面中在新窗口中打开链接。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>内嵌文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.google.com"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Open new page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"top.open('http://www.google.com')"</span>&gt;</span>Open new page<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="动态嵌入文档"><a href="#动态嵌入文档" class="headerlink" title="动态嵌入文档"></a>动态嵌入文档</h3><p>通过为<code>iframe</code>元素的<code>src</code>属性赋值不同的URL，来实现动态的嵌入其它文档。
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- html --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"frameDoc"</span> <span class="attr">src</span>=<span class="string">"http://www.google.com"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"jumpToBaidu()"</span>&gt;</span>Baidu<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">jumpToBaidu</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> frameDoc = <span class="built_in">document</span>.getElementById(<span class="string">"frameDoc"</span>);</div><div class="line">        frameDoc.src = <span class="string">"http://www.baidu.com"</span>;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="iframe加载事件处理"><a href="#iframe加载事件处理" class="headerlink" title="iframe加载事件处理"></a>iframe加载事件处理</h3><p><code>iframe</code>元素支持<code>load</code>事件来检测嵌入的文档是否加载完毕,原生代码写法
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- HTML --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"frameDoc"</span> <span class="attr">src</span>=<span class="string">"framePage.html"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//function addLoadEventToIframe</span></div><div class="line">    <span class="keyword">var</span> iframeDom = <span class="built_in">document</span>.getElementById(<span class="string">"embedIframe"</span>);</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.addEventListener)()&#123;</div><div class="line">            iframeDom.addEventListener(<span class="string">"load"</span> , iframePageLoadedCallback);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.attachEvent)&#123;</div><div class="line">            iframeDOM.attachEvent(<span class="string">"onload"</span> , iframePageLoadedCallback);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">iframePageLoadedCallback</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"iframe page loaded"</span>);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用jQuery写法，
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- HTML --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"frameDoc"</span> <span class="attr">src</span>=<span class="string">"framePage.html"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        $(<span class="string">"#frameDoc"</span>).bind(<span class="string">"load"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"iframe page loaded"</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="获取彼此的window和document对象"><a href="#获取彼此的window和document对象" class="headerlink" title="获取彼此的window和document对象"></a>获取彼此的window和document对象</h3><p><code>iframe</code>嵌入文档的脚本与其父文档之间的脚本可以直接交互，但要满足<strong>同源策略</strong>,即<code>iframe</code>嵌入的页面URL与其父文档的URL要属于相同的域（协议，域名和端口号要完全相同）。在此基础上它们之间可以自由实现对象的互访。</p>
<p>在<code>iframe</code>的页面中获取父文档的<code>window</code>对象和<code>document</code>对象
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- iframe page script --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> parentWindow = <span class="built_in">window</span>.parent ;</div><div class="line">    <span class="keyword">var</span> parentDoc = <span class="built_in">window</span>.parent.document ;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></div></pre></td></tr></table></figure></p>
<p>在父文档中获取<code>ifrmae</code>嵌套页面的<code>window</code>对象和<code>document</code>对象
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- embed iframe--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"frameDoc"</span> <span class="attr">src</span>=<span class="string">"iframePage.html"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script of parent page containing iframe page--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> iframeDom = <span class="built_in">document</span>.getElementById(<span class="string">"frameDoc"</span>);</div><div class="line">    <span class="keyword">var</span> iframeWindow = iframeDom.contentWindow ;</div><div class="line">    <span class="keyword">var</span> iframeDoc = iframeDom.contentDocument || iframeWindow.document ; <span class="comment">// IE6/7/8不支持iframe.contentDocument属性</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="js代码互调"><a href="#js代码互调" class="headerlink" title="js代码互调"></a>js代码互调</h3><p>同样在满足<strong>同源策略</strong>的前提下，<code>iframe</code>嵌入文档的脚本与其父文档的脚本可以实现全局方法的调用和全局属性的访问。示例：</p>
<p><code>iframe</code>的父文档<code>iframe-parent-page.html</code>代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>父文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Ifrmae Page<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"framePage"</span> <span class="attr">src</span>=<span class="string">"framePage.html"</span> <span class="attr">style</span>=<span class="string">"width:400px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"callIframeMethod()"</span>&gt;</span>调用iframe中嵌入文档的全局方法<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"callIframeMethod()"</span>&gt;</span>访问iframe中嵌入文档的全局属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="comment">// 当前文档的全局属性可以被iframe内嵌的文档访问</span></div><div class="line">            <span class="keyword">var</span> globalPro = <span class="string">"父文档的全局属性"</span> ;</div><div class="line">            <span class="comment">// 当前文档的全局方法可以被iframe内嵌的文档调用</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">globalMethod</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                alert(<span class="string">"父文档的全局方法"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// ------------------------------------------------------</span></div><div class="line">            <span class="comment">// 调用iframe中嵌入页面的全部方法</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">callIframeMethod</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> framePage = <span class="built_in">document</span>.getElementById(<span class="string">"framePage"</span>);</div><div class="line">                <span class="keyword">var</span> iframeWin = framePage.contentWindow ;</div><div class="line">                iframeWin.globalMethod();</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// 访问iframe中嵌入文档的全局属性</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">accessIframeProperty</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> framePage = <span class="built_in">document</span>.getElementById(<span class="string">"framePage"</span>);</div><div class="line">                <span class="keyword">var</span> iframeWin = framePage.contentWindow ;</div><div class="line">                alert(iframeWin.globalPro) ;</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>iframe</code>的内嵌文档<code>frame-page.html</code>的代码
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>iframe内嵌文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"callParentGlobalMethod()"</span>&gt;</span>调用父文档的全局方法<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"accessParentGlobalPro()"</span>&gt;</span>访问父文档的全局属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">            <span class="comment">// 当前文档的全局属性可以被iframe内嵌的文档访问</span></div><div class="line">            <span class="keyword">var</span> globalPro = <span class="string">"iframe内嵌文档的全局属性"</span> ;</div><div class="line">            <span class="comment">// 当前文档的全局方法可以被iframe内嵌的文档调用</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">globalMethod</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                alert(<span class="string">"iframe内嵌文档的全局方法"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// ----------------------------------------------------</span></div><div class="line">            <span class="comment">// 调用父文档的全局方法</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">callParentGlobalMethod</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> parentWindow = <span class="built_in">window</span>.parent ;</div><div class="line">                parentWindow.globalMethod();</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// 访问父文档的全局属性</span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">accessParentGlobalPro</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> parentWindow = <span class="built_in">window</span>.parent ;</div><div class="line">                alert(parentWindow.globalPro);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="自适应高度"><a href="#自适应高度" class="headerlink" title="自适应高度"></a>自适应高度</h3><p>有时在Web页面的布局中需要<code>iframe</code>元素的高度自适应其嵌入文档的高度，在满足<strong>同源策略</strong>的前提下，可以以下方式完成</p>
<p>原生代码写法：
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- html--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"http://www.google.com"</span> <span class="attr">onload</span>=<span class="string">"autoHeigt()"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">autoHeigt</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">var</span> doc = docFrame.contentDocument || docFrame.contentWindow.document ;</div><div class="line">        <span class="keyword">this</span>.style.height = doc.documentElement.scrollHeight+<span class="string">"px"</span>;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用jQuery，代码如下
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- html--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"frameDoc"</span> <span class="attr">src</span>=<span class="string">"http://www.google.com"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- script --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://code.jquery.com/jquery-1.11.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    $(<span class="string">"#frameDoc"</span>).bind(<span class="string">"load"</span> , <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> doc = <span class="keyword">this</span>.contentDocument || <span class="keyword">this</span>.contentWindow.document ;</div><div class="line">        $(<span class="keyword">this</span>).css(<span class="string">"height"</span> , $(doc).height());</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://stackoverflow.com/questions/65034/remove-border-from-iframe" target="_blank" rel="external">Remove border from IFrame</a></li>
<li><a href="http://stackoverflow.com/questions/251420/invoking-javascript-code-in-an-iframe-from-the-parent-page" target="_blank" rel="external">Invoking JavaScript code in an iframe from the parent page</a></li>
<li><a href="http://stackoverflow.com/questions/819416/adjust-width-height-of-iframe-to-fit-with-content-in-it?lq=1" target="_blank" rel="external">Adjust width height of iframe to fit with content in it</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/ms535258\(v=vs.85\" target="_blank" rel="external">iframe element | iframe object</a>.aspx)</li>
<li><a href="http://msdn.microsoft.com/en-us/library/ie/cc197055\(v=vs.85\" target="_blank" rel="external">load | onload event</a>.aspx)</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe" target="_blank" rel="external">iframe</a></li>
<li><a href="http://www.w3school.com.cn/tags/tag_iframe.asp" target="_blank" rel="external">HTML iframe 标签</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript" target="_blank" rel="external">Same-origin policy</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/ms533028\(VS.85\" target="_blank" rel="external">About Cross-Frame Scripting and Security</a>.aspx)</li>
<li><a href="http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/" target="_blank" rel="external">Iframes, onload, and document.domain</a></li>
<li><a href="http://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content" target="_blank" rel="external">Resizing an iframe based on content</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/MySQL服务器的线程状况/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/MySQL服务器的线程状况/" itemprop="url">MySQL服务器的线程状况</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/MySQL服务器的线程状况/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/MySQL服务器的线程状况/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>了解MySQL的当前线程信息对于掌握MySQL的运行状况如何是很有帮助的，尤其是当出现并发连接数量超过上限引起“too many connections”错误时，我们需要了解当前服务器所发生的情况。</p>
<h3 id="show-processlist语句"><a href="#show-processlist语句" class="headerlink" title="show processlist语句"></a>show processlist语句</h3><p>SQL中的<code>show processlist</code>语句用来想我们展示当前服务器有哪些线程正在运行，以及每个线程的运行状态。拥有<a href="http://dev.mysql.com/doc/refman/5.6/en/privileges-provided.html#priv_process" target="_blank" rel="external">PROCESS</a>权限的用户可以通过该语句查看服务器的所有线程，否则只能查看当前账户本身关联对应的线程。默认情况下<code>show processlist</code>语句只能查看每个结果的<code>Info</code>字段的前100个字符，可以使用<code>FULL</code>关键字查看所有信息，如：<code>show full processlist</code></p>
<blockquote>
<p>附注:</p>
<ul>
<li><code>performance_schema.threads</code>表中包含了所有服务器的线程信息,具体描述参见官网。</li>
<li><a href="5"><code>mysqladmin processlist</code></a>命令也可以用来完成与<code>show processlist</code>语句同样的功能。</li>
</ul>
</blockquote>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>首先我本地Mac OS下安装了MySQL服务器，并正常运行中。</p>
<p>其次，因为我本地同时安装了Java开发环境，并建有使用数据库的Java Web工程，提供数据库连接池功能，所以为了方便说明，我将本地的连接池数量初始化为10，并更改数据库的配置信息连接到本地MySQL服务器的<code>test</code>数据库，之后运行我的Web工程，初始化数据库连接。</p>
<p>之后，在系统的命令行终端，连接我本地的MySQL服务器，查看使用<code>show processlist</code>的显示结果,如</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">192:bin manjun.han$ mysql -u root -h localhost -p</div><div class="line">Enter password:</div><div class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</div><div class="line">Your MySQL connection id is 3000</div><div class="line">Server version: 5.6.15 MySQL Community Server (GPL)</div><div class="line"></div><div class="line">Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> help. Type <span class="string">'\c'</span> to clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt; show processlist;</div><div class="line">+------+------+-----------------+------+---------+------+-------+------------------+</div><div class="line">| Id   | User | Host            | db   | Command | Time | State | Info             |</div><div class="line">+------+------+-----------------+------+---------+------+-------+------------------+</div><div class="line">| 2559 | root | localhost       | NULL | Sleep   | 9079 |       | NULL             |</div><div class="line">| 2987 | root | localhost:53130 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2988 | root | localhost:53131 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2989 | root | localhost:53132 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2990 | root | localhost:53133 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2991 | root | localhost:53134 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2992 | root | localhost:53135 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2993 | root | localhost:53136 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2994 | root | localhost:53137 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2995 | root | localhost:53138 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2996 | root | localhost:53139 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2997 | root | localhost:53140 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 2998 | root | localhost:53141 | <span class="built_in">test</span> | Sleep   |  505 |       | NULL             |</div><div class="line">| 3000 | root | localhost       | NULL | Query   |    0 | init  | show processlist |</div><div class="line">+------+------+-----------------+------+---------+------+-------+------------------+</div><div class="line">14 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<p>以上字段的说明如下：</p>
<ul>
<li>Id - 连接标识符    。</li>
<li>User - 线程所属用户。</li>
<li>Host - 连接线程的客户端主机名。</li>
<li>db - 默认连接数据库名称。未选择的话，值为NULL。</li>
<li>Command - 线程执行命令的类型，<code>Sleep</code>代表当前线程正等待客户端发送语句，<code>Query</code>代表当前线程正在执行查询，更多类型说明参见<a href="4">Thread Command Values</a>。</li>
<li>Time - 当前线程保持目前状态的时间(单位:秒)。</li>
<li>State - 表示线程执行中发生的行为，事件或状态，多数状态多对应于某些快速的操作，如果线程长时间呆在某个状态，这事可能发生了错误，需要仔细调查。参见<a href="http://dev.mysql.com/doc/refman/5.6/en/thread-information.html" target="_blank" rel="external">Examining Thread Information</a>。对于<code>show processlist</code>语句查询，该字段值为NULL。</li>
<li>Info - 线程执行的语句描述，如果未有语句执行，此字段为NULL。如标识符为3000的最后一条记录是我们执行<code>show processlist</code>语句的线程信息。</li>
</ul>
<h3 id="Too-many-connections错误说明"><a href="#Too-many-connections错误说明" class="headerlink" title="Too many connections错误说明"></a>Too many connections错误说明</h3><p>连接MySQL服务器，发生Too many connections的错误，意味着服务器当前所有连接都被其它客户端占用。</p>
<p>MySQL服务器的最大连接数是通过<a href="2">max_connections</a>系统变量设置的。MySQL5.6版本默认最大连接数是150，之前的MySQL版本，如MySQL5.1的最大连接数为100.通过为<a href="2">max_connections</a>变量设置更大的值，可以设置MySQL服务器支持更大的并发连接数。</p>
<p>事实上MySQL服务器在设置<a href="2">max_connections</a>的值，做了个隐式的特殊处理，会在实际的数量之上多添加一个连接，即最大连接数量实际为<a href="2">max_connections+1</a>。假如你设置<a href="2">max_connections</a>＝150，那么实际服务器的<a href="2">max_connections</a>＝151。这个额外的连接是为了留给拥有<a href="3">SUPER</a>权限的账户使用的。一般情况下只有管理员账户拥有<a href="3">SUPER</a>权限，但普通的账户却没有。这样即使是发生Too many connections错误，管理员账户也可以连接到MySQL服务器，使用<code>show processlist</code>语句来诊断问题。</p>
<p>MySQL支持的最大连接数依赖于其运行平台的线程库(thread library)的质量，总的可用RAM的大小，每个连接消耗的RAM大小，每个连接的负载(workload)，预期相应时间。Linux或Solaris平台通常可以支持500到1000的并发连接，如果有足够的RAM，每个连接的负载较低，并且对响应时间要求不高，那么最大的并发连接可以到10000。</p>
<blockquote>
<p><a href="http://www.microshell.com/database/mysql/mysql-too-many-connection-errors/" target="_blank" rel="external">MySQL : Too many connection errors.</a>提及，服务器磁盘的爆满，也可能引起Too many connections错误。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://dev.mysql.com/doc/refman/5.6/en/show-processlist.html" target="_blank" rel="external">SHOW PROCESSLIST 语法(MySQL5.6)</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.6/en/threads-table.html" target="_blank" rel="external">The threads Table(MySQL5.6)</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.6/en/too-many-connections.html" target="_blank" rel="external"> Too many connections(MySQL5.6)</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.1/zh/problems.html#too-many-connections" target="_blank" rel="external">A.2.6. 连接数过多(MySQL5.1)</a></li>
<li><a href="http://dev.mysql.com/doc/refman/5.6/en/thread-information.html" target="_blank" rel="external">Examining Thread Information</a></li>
<li><a href="4">Thread Command Values</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://monjer.github.io/2014/03/15/获取select列表的单选值/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="monjer">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="monjer's note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/15/获取select列表的单选值/" itemprop="url">获取select列表的单选值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-15T00:00:00+08:00">
                2014-03-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2014/03/15/获取select列表的单选值/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/03/15/获取select列表的单选值/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>对于<code>&lt;select&gt;</code>元素来说一般我们都会在其<code>change</code>事件中获取当前选中的<code>&lt;option&gt;</code>的值，示例HTML代码片段如下
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;select id=<span class="string">"list"</span>&gt;</div><div class="line">    &lt;option value=<span class="string">"1"</span>&gt;Value 1&lt;/option&gt;</div><div class="line">    &lt;option value=<span class="string">"2"</span>&gt;Value 2&lt;/option&gt;</div><div class="line">    &lt;option value=<span class="string">"3"</span>&gt;Value 3&lt;/option&gt;</div><div class="line">    &lt;option value=<span class="string">"3"</span>&gt;Value 3&lt;/option&gt;</div><div class="line">&lt;/select&gt;</div><div class="line">&lt;div id=<span class="string">"desc"</span>&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<h3 id="options属性和selectedIndex属性"><a href="#options属性和selectedIndex属性" class="headerlink" title="options属性和selectedIndex属性"></a>options属性和selectedIndex属性</h3><p><code>&lt;select&gt;</code>的DOM元素中<code>options</code>属性保存所有<code>&lt;option&gt;</code>DOM元素的集合，而<code>selectedIndex</code>属性的值指向的是<code>&lt;option&gt;</code>DOM集合中当前选中的<code>&lt;option&gt;</code>的索引，如果未选择任何一个<code>&lt;option&gt;</code>，那么<code>selectedIndex</code>的值为<code>-1</code>,结合以上两个属性可以获取当前选中<code>&lt;option&gt;</code>的值，原生写法如下:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> list = <span class="built_in">document</span>.getElementById(<span class="string">"list"</span>);</div><div class="line"><span class="keyword">var</span> desc = <span class="built_in">document</span>.getElementById(<span class="string">"desc"</span>);</div><div class="line">list.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> selOption , value ;</div><div class="line">    <span class="keyword">if</span>(list.selectedIndex&gt;<span class="number">-1</span>)&#123;</div><div class="line">        selOption = list.options[list.selectedIndex] ;</div><div class="line">        value = selOption.value ;</div><div class="line">        desc.innerText=<span class="string">"selected : "</span> + value</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>jQuery写法
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#list"</span>).change=<span class="function"><span class="keyword">function</span>(<span class="params">$e</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> val = $(<span class="string">"option:selected"</span>,<span class="keyword">this</span>).val();</div><div class="line">    $(<span class="string">"#des"</span>).html(<span class="string">"selected : "</span>+val) ;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>HTML5中<code>&lt;select&gt;</code>DOM元素新增了一个<code>selectedOptions</code>属性，该属性类型为<code>HTMLCollection</code>,用以获取当前选中的<code>option</code>集合，但目前并非所有浏览器都支持该属性。</p>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement" target="_blank" rel="external">HTMLSelectElement</a></li>
<li><a href="http://api.jquery.com/selected-selector/" target="_blank" rel="external">:selected Selector</a></li>
<li><a href="http://stackoverflow.com/questions/10711767/is-selectedoptions-broken-or" target="_blank" rel="external">Is selectedOptions broken or…?</a></li>
<li><a href="http://stackoverflow.com/questions/13753201/selectedoptions0-textcontent-not-working-in-ie-or-firefox" target="_blank" rel="external">selectedOptions[0].textContent; not working in IE or Firefox</a></li>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#dom-select-selectedoptions" target="_blank" rel="external">selectedOptions</a></li>
<li><a href="http://jsfiddle.net/DaJun/d8YDE/" target="_blank" rel="external">Code</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="monjer" />
          <p class="site-author-name" itemprop="name">monjer</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">135</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">82</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">monjer</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"monjer"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  





  

  

  

  

  

</body>
</html>
